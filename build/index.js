!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.spx=e():t.spx=e()}(window,function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=19)}([function(t,e,r){var i;t.exports=(i=i||function(t,e){var r=Object.create||function(){function t(){}return function(e){var r;return t.prototype=e,r=new t,t.prototype=null,r}}(),i={},n=i.lib={},s=n.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,r=t.words,i=this.sigBytes,n=t.sigBytes;if(this.clamp(),i%4)for(var s=0;s<n;s++){var o=r[s>>>2]>>>24-s%4*8&255;e[i+s>>>2]|=o<<24-(i+s)%4*8}else for(var s=0;s<n;s+=4)e[i+s>>>2]=r[s>>>2];return this.sigBytes+=n,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r,i=[],n=function(e){var e=e,r=987654321,i=4294967295;return function(){var n=((r=36969*(65535&r)+(r>>16)&i)<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i;return n/=4294967296,(n+=.5)*(t.random()>.5?1:-1)}},s=0;s<e;s+=4){var a=n(4294967296*(r||t.random()));r=987654071*a(),i.push(4294967296*a()|0)}return new o.init(i,e)}}),a=i.enc={},l=a.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],n=0;n<r;n++){var s=e[n>>>2]>>>24-n%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i+=2)r[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new o.init(r,e/2)}},c=a.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],n=0;n<r;n++){var s=e[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i++)r[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new o.init(r,e)}},u=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=n.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,i=r.words,n=r.sigBytes,s=this.blockSize,a=4*s,l=n/a,c=(l=e?t.ceil(l):t.max((0|l)-this._minBufferSize,0))*s,u=t.min(4*c,n);if(c){for(var h=0;h<c;h+=s)this._doProcessBlock(i,h);var d=i.splice(0,c);r.sigBytes-=u}return new o.init(d,u)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(n.Hasher=h.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new d.HMAC.init(t,r).finalize(e)}}}),i.algo={});return i}(Math),i)},function(t,e,r){var i;t.exports=(i=r(0),r(4),void(i.lib.Cipher||function(t){var e=i,r=e.lib,n=r.Base,s=r.WordArray,o=r.BufferedBlockAlgorithm,a=e.enc,l=(a.Utf8,a.Base64),c=e.algo,u=c.EvpKDF,h=r.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?S:v}return function(e){return{encrypt:function(r,i,n){return t(i).encrypt(e,r,i,n)},decrypt:function(r,i,n){return t(i).decrypt(e,r,i,n)}}}}()}),d=(r.StreamCipher=h.extend({_doFinalize:function(){var t=this._process(!0);return t},blockSize:1}),e.mode={}),f=r.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),p=d.CBC=function(){var e=f.extend();function r(e,r,i){var n=this._iv;if(n){var s=n;this._iv=t}else var s=this._prevBlock;for(var o=0;o<i;o++)e[r+o]^=s[o]}return e.Encryptor=e.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize;r.call(this,t,e,n),i.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),e.Decryptor=e.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,s=t.slice(e,e+n);i.decryptBlock(t,e),r.call(this,t,e,n),this._prevBlock=s}}),e}(),g=e.pad={},m=g.Pkcs7={pad:function(t,e){for(var r=4*e,i=r-t.sigBytes%r,n=i<<24|i<<16|i<<8|i,o=[],a=0;a<i;a+=4)o.push(n);var l=s.create(o,i);t.concat(l)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},y=(r.BlockCipher=h.extend({cfg:h.cfg.extend({mode:p,padding:m}),reset:function(){h.reset.call(this);var t=this.cfg,e=t.iv,r=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=r.createEncryptor;else{var i=r.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==i?this._mode.init(this,e&&e.words):(this._mode=i.call(r,this,e&&e.words),this._mode.__creator=i)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{var e=this._process(!0);t.unpad(e)}return e},blockSize:4}),r.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),b=e.format={},_=b.OpenSSL={stringify:function(t){var e=t.ciphertext,r=t.salt;if(r)var i=s.create([1398893684,1701076831]).concat(r).concat(e);else var i=e;return i.toString(l)},parse:function(t){var e=l.parse(t),r=e.words;if(1398893684==r[0]&&1701076831==r[1]){var i=s.create(r.slice(2,4));r.splice(0,4),e.sigBytes-=16}return y.create({ciphertext:e,salt:i})}},v=r.SerializableCipher=n.extend({cfg:n.extend({format:_}),encrypt:function(t,e,r,i){i=this.cfg.extend(i);var n=t.createEncryptor(r,i),s=n.finalize(e),o=n.cfg;return y.create({ciphertext:s,key:r,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,r,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var n=t.createDecryptor(r,i).finalize(e.ciphertext);return n},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),x=e.kdf={},w=x.OpenSSL={execute:function(t,e,r,i){i||(i=s.random(8));var n=u.create({keySize:e+r}).compute(t,i),o=s.create(n.words.slice(e),4*r);return n.sigBytes=4*e,y.create({key:n,iv:o,salt:i})}},S=r.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:w}),encrypt:function(t,e,r,i){var n=(i=this.cfg.extend(i)).kdf.execute(r,t.keySize,t.ivSize);i.iv=n.iv;var s=v.encrypt.call(this,t,e,n.key,i);return s.mixIn(n),s},decrypt:function(t,e,r,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var n=i.kdf.execute(r,t.keySize,t.ivSize,e.salt);i.iv=n.iv;var s=v.decrypt.call(this,t,e,n.key,i);return s}})}()))},function(t,e,r){"use strict";var i=r(14),n=r(44),s=Object.prototype.toString;function o(t){return"[object Array]"===s.call(t)}function a(t){return null!==t&&"object"==typeof t}function l(t){return"[object Function]"===s.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===s.call(t)},isBuffer:n,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===s.call(t)},isFile:function(t){return"[object File]"===s.call(t)},isBlob:function(t){return"[object Blob]"===s.call(t)},isFunction:l,isStream:function(t){return a(t)&&l(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function r(r,i){"object"==typeof e[i]&&"object"==typeof r?e[i]=t(e[i],r):e[i]=r}for(var i=0,n=arguments.length;i<n;i++)c(arguments[i],r);return e},extend:function(t,e,r){return c(e,function(e,n){t[n]=r&&"function"==typeof e?i(e,r):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,r){t.exports=r(43)},function(t,e,r){var i,n,s,o,a,l,c,u;t.exports=(i=r(0),r(9),r(10),s=(n=i).lib,o=s.Base,a=s.WordArray,l=n.algo,c=l.MD5,u=l.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,i=r.hasher.create(),n=a.create(),s=n.words,o=r.keySize,l=r.iterations;s.length<o;){c&&i.update(c);var c=i.update(t).finalize(e);i.reset();for(var u=1;u<l;u++)c=i.finalize(c),i.reset();n.concat(c)}return n.sigBytes=4*o,n}}),n.EvpKDF=function(t,e,r){return u.create(r).compute(t,e)},i.EvpKDF)},function(t,e,r){var i,n,s;t.exports=(i=r(0),s=(n=i).lib.WordArray,n.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,i=this._map;t.clamp();for(var n=[],s=0;s<r;s+=3)for(var o=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<r;a++)n.push(i.charAt(o>>>6*(3-a)&63));var l=i.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(t){var e=t.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var n=0;n<r.length;n++)i[r.charCodeAt(n)]=n}var o=r.charAt(64);if(o){var a=t.indexOf(o);-1!==a&&(e=a)}return function(t,e,r){for(var i=[],n=0,o=0;o<e;o++)if(o%4){var a=r[t.charCodeAt(o-1)]<<o%4*2,l=r[t.charCodeAt(o)]>>>6-o%4*2;i[n>>>2]|=(a|l)<<24-n%4*8,n++}return s.create(i,n)}(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},i.enc.Base64)},function(t,e,r){var i;t.exports=(i=r(0),function(t){var e=i,r=e.lib,n=r.WordArray,s=r.Hasher,o=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var l=o.MD5=s.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var i=e+r,n=t[i];t[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var s=this._hash.words,o=t[e+0],l=t[e+1],f=t[e+2],p=t[e+3],g=t[e+4],m=t[e+5],y=t[e+6],b=t[e+7],_=t[e+8],v=t[e+9],x=t[e+10],w=t[e+11],S=t[e+12],C=t[e+13],U=t[e+14],P=t[e+15],j=s[0],O=s[1],T=s[2],k=s[3];j=c(j,O,T,k,o,7,a[0]),k=c(k,j,O,T,l,12,a[1]),T=c(T,k,j,O,f,17,a[2]),O=c(O,T,k,j,p,22,a[3]),j=c(j,O,T,k,g,7,a[4]),k=c(k,j,O,T,m,12,a[5]),T=c(T,k,j,O,y,17,a[6]),O=c(O,T,k,j,b,22,a[7]),j=c(j,O,T,k,_,7,a[8]),k=c(k,j,O,T,v,12,a[9]),T=c(T,k,j,O,x,17,a[10]),O=c(O,T,k,j,w,22,a[11]),j=c(j,O,T,k,S,7,a[12]),k=c(k,j,O,T,C,12,a[13]),T=c(T,k,j,O,U,17,a[14]),j=u(j,O=c(O,T,k,j,P,22,a[15]),T,k,l,5,a[16]),k=u(k,j,O,T,y,9,a[17]),T=u(T,k,j,O,w,14,a[18]),O=u(O,T,k,j,o,20,a[19]),j=u(j,O,T,k,m,5,a[20]),k=u(k,j,O,T,x,9,a[21]),T=u(T,k,j,O,P,14,a[22]),O=u(O,T,k,j,g,20,a[23]),j=u(j,O,T,k,v,5,a[24]),k=u(k,j,O,T,U,9,a[25]),T=u(T,k,j,O,p,14,a[26]),O=u(O,T,k,j,_,20,a[27]),j=u(j,O,T,k,C,5,a[28]),k=u(k,j,O,T,f,9,a[29]),T=u(T,k,j,O,b,14,a[30]),j=h(j,O=u(O,T,k,j,S,20,a[31]),T,k,m,4,a[32]),k=h(k,j,O,T,_,11,a[33]),T=h(T,k,j,O,w,16,a[34]),O=h(O,T,k,j,U,23,a[35]),j=h(j,O,T,k,l,4,a[36]),k=h(k,j,O,T,g,11,a[37]),T=h(T,k,j,O,b,16,a[38]),O=h(O,T,k,j,x,23,a[39]),j=h(j,O,T,k,C,4,a[40]),k=h(k,j,O,T,o,11,a[41]),T=h(T,k,j,O,p,16,a[42]),O=h(O,T,k,j,y,23,a[43]),j=h(j,O,T,k,v,4,a[44]),k=h(k,j,O,T,S,11,a[45]),T=h(T,k,j,O,P,16,a[46]),j=d(j,O=h(O,T,k,j,f,23,a[47]),T,k,o,6,a[48]),k=d(k,j,O,T,b,10,a[49]),T=d(T,k,j,O,U,15,a[50]),O=d(O,T,k,j,m,21,a[51]),j=d(j,O,T,k,S,6,a[52]),k=d(k,j,O,T,p,10,a[53]),T=d(T,k,j,O,x,15,a[54]),O=d(O,T,k,j,l,21,a[55]),j=d(j,O,T,k,_,6,a[56]),k=d(k,j,O,T,P,10,a[57]),T=d(T,k,j,O,y,15,a[58]),O=d(O,T,k,j,C,21,a[59]),j=d(j,O,T,k,g,6,a[60]),k=d(k,j,O,T,w,10,a[61]),T=d(T,k,j,O,f,15,a[62]),O=d(O,T,k,j,v,21,a[63]),s[0]=s[0]+j|0,s[1]=s[1]+O|0,s[2]=s[2]+T|0,s[3]=s[3]+k|0},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;r[n>>>5]|=128<<24-n%32;var s=t.floor(i/4294967296),o=i;r[15+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,l=a.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,r,i,n,s,o){var a=t+(e&r|~e&i)+n+o;return(a<<s|a>>>32-s)+e}function u(t,e,r,i,n,s,o){var a=t+(e&i|r&~i)+n+o;return(a<<s|a>>>32-s)+e}function h(t,e,r,i,n,s,o){var a=t+(e^r^i)+n+o;return(a<<s|a>>>32-s)+e}function d(t,e,r,i,n,s,o){var a=t+(r^(e|~i))+n+o;return(a<<s|a>>>32-s)+e}e.MD5=s._createHelper(l),e.HmacMD5=s._createHmacHelper(l)}(Math),i.MD5)},function(t,e,r){var i,n,s,o,a,l;t.exports=(i=r(0),s=(n=i).lib,o=s.Base,a=s.WordArray,(l=n.x64={}).Word=o.extend({init:function(t,e){this.high=t,this.low=e}}),l.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,r=[],i=0;i<e;i++){var n=t[i];r.push(n.high),r.push(n.low)}return a.create(r,this.sigBytes)},clone:function(){for(var t=o.clone.call(this),e=t.words=this.words.slice(0),r=e.length,i=0;i<r;i++)e[i]=e[i].clone();return t}}),i)},function(t,e,r){var i;t.exports=(i=r(0),r(7),r(20),r(21),r(5),r(6),r(9),r(12),r(22),r(13),r(23),r(24),r(25),r(10),r(26),r(4),r(1),r(27),r(28),r(29),r(30),r(31),r(32),r(33),r(34),r(35),r(36),r(37),r(38),r(39),r(40),r(41),r(42),i)},function(t,e,r){var i,n,s,o,a,l,c,u;t.exports=(i=r(0),s=(n=i).lib,o=s.WordArray,a=s.Hasher,l=n.algo,c=[],u=l.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,i=r[0],n=r[1],s=r[2],o=r[3],a=r[4],l=0;l<80;l++){if(l<16)c[l]=0|t[e+l];else{var u=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=u<<1|u>>>31}var h=(i<<5|i>>>27)+a+c[l];h+=l<20?1518500249+(n&s|~n&o):l<40?1859775393+(n^s^o):l<60?(n&s|n&o|s&o)-1894007588:(n^s^o)-899497514,a=o,o=s,s=n<<30|n>>>2,n=i,i=h}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),e[15+(i+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),n.SHA1=a._createHelper(u),n.HmacSHA1=a._createHmacHelper(u),i.SHA1)},function(t,e,r){var i,n,s,o,a,l,c;t.exports=(i=r(0),s=(n=i).lib,o=s.Base,a=n.enc,l=a.Utf8,c=n.algo,void(c.HMAC=o.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=l.parse(e));var r=t.blockSize,i=4*r;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var n=this._oKey=e.clone(),s=this._iKey=e.clone(),o=n.words,a=s.words,c=0;c<r;c++)o[c]^=1549556828,a[c]^=909522486;n.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,r=e.finalize(t);e.reset();var i=e.finalize(this._oKey.clone().concat(r));return i}})))},function(t,e,r){"use strict";(function(e){var i=r(2),n=r(47),s={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,l={adapter:("undefined"!=typeof XMLHttpRequest?a=r(15):void 0!==e&&(a=r(15)),a),transformRequest:[function(t,e){return n(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){l.headers[t]={}}),i.forEach(["post","put","patch"],function(t){l.headers[t]=i.merge(s)}),t.exports=l}).call(this,r(46))},function(t,e,r){var i;t.exports=(i=r(0),function(t){var e=i,r=e.lib,n=r.WordArray,s=r.Hasher,o=e.algo,a=[],l=[];!function(){function e(e){for(var r=t.sqrt(e),i=2;i<=r;i++)if(!(e%i))return!1;return!0}function r(t){return 4294967296*(t-(0|t))|0}for(var i=2,n=0;n<64;)e(i)&&(n<8&&(a[n]=r(t.pow(i,.5))),l[n]=r(t.pow(i,1/3)),n++),i++}();var c=[],u=o.SHA256=s.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,i=r[0],n=r[1],s=r[2],o=r[3],a=r[4],u=r[5],h=r[6],d=r[7],f=0;f<64;f++){if(f<16)c[f]=0|t[e+f];else{var p=c[f-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=c[f-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[f]=g+c[f-7]+y+c[f-16]}var b=i&n^i&s^n&s,_=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),v=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&h)+l[f]+c[f];d=h,h=u,u=a,a=o+v|0,o=s,s=n,n=i,i=v+(_+b)|0}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0,r[5]=r[5]+u|0,r[6]=r[6]+h|0,r[7]=r[7]+d|0},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return r[n>>>5]|=128<<24-n%32,r[14+(n+64>>>9<<4)]=t.floor(i/4294967296),r[15+(n+64>>>9<<4)]=i,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=s._createHelper(u),e.HmacSHA256=s._createHmacHelper(u)}(Math),i.SHA256)},function(t,e,r){var i;t.exports=(i=r(0),r(7),function(){var t=i,e=t.lib.Hasher,r=t.x64,n=r.Word,s=r.WordArray,o=t.algo;function a(){return n.create.apply(n,arguments)}var l=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],c=[];!function(){for(var t=0;t<80;t++)c[t]=a()}();var u=o.SHA512=e.extend({_doReset:function(){this._hash=new s.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var r=this._hash.words,i=r[0],n=r[1],s=r[2],o=r[3],a=r[4],u=r[5],h=r[6],d=r[7],f=i.high,p=i.low,g=n.high,m=n.low,y=s.high,b=s.low,_=o.high,v=o.low,x=a.high,w=a.low,S=u.high,C=u.low,U=h.high,P=h.low,j=d.high,O=d.low,T=f,k=p,B=g,I=m,E=y,$=b,R=_,A=v,F=x,L=w,D=S,M=C,V=U,H=P,N=j,z=O,W=0;W<80;W++){var q=c[W];if(W<16)var K=q.high=0|t[e+2*W],Q=q.low=0|t[e+2*W+1];else{var G=c[W-15],X=G.high,J=G.low,Z=(X>>>1|J<<31)^(X>>>8|J<<24)^X>>>7,Y=(J>>>1|X<<31)^(J>>>8|X<<24)^(J>>>7|X<<25),tt=c[W-2],et=tt.high,rt=tt.low,it=(et>>>19|rt<<13)^(et<<3|rt>>>29)^et>>>6,nt=(rt>>>19|et<<13)^(rt<<3|et>>>29)^(rt>>>6|et<<26),st=c[W-7],ot=st.high,at=st.low,lt=c[W-16],ct=lt.high,ut=lt.low;K=(K=(K=Z+ot+((Q=Y+at)>>>0<Y>>>0?1:0))+it+((Q+=nt)>>>0<nt>>>0?1:0))+ct+((Q+=ut)>>>0<ut>>>0?1:0),q.high=K,q.low=Q}var ht,dt=F&D^~F&V,ft=L&M^~L&H,pt=T&B^T&E^B&E,gt=k&I^k&$^I&$,mt=(T>>>28|k<<4)^(T<<30|k>>>2)^(T<<25|k>>>7),yt=(k>>>28|T<<4)^(k<<30|T>>>2)^(k<<25|T>>>7),bt=(F>>>14|L<<18)^(F>>>18|L<<14)^(F<<23|L>>>9),_t=(L>>>14|F<<18)^(L>>>18|F<<14)^(L<<23|F>>>9),vt=l[W],xt=vt.high,wt=vt.low,St=N+bt+((ht=z+_t)>>>0<z>>>0?1:0),Ct=yt+gt;N=V,z=H,V=D,H=M,D=F,M=L,F=R+(St=(St=(St=St+dt+((ht+=ft)>>>0<ft>>>0?1:0))+xt+((ht+=wt)>>>0<wt>>>0?1:0))+K+((ht+=Q)>>>0<Q>>>0?1:0))+((L=A+ht|0)>>>0<A>>>0?1:0)|0,R=E,A=$,E=B,$=I,B=T,I=k,T=St+(mt+pt+(Ct>>>0<yt>>>0?1:0))+((k=ht+Ct|0)>>>0<ht>>>0?1:0)|0}p=i.low=p+k,i.high=f+T+(p>>>0<k>>>0?1:0),m=n.low=m+I,n.high=g+B+(m>>>0<I>>>0?1:0),b=s.low=b+$,s.high=y+E+(b>>>0<$>>>0?1:0),v=o.low=v+A,o.high=_+R+(v>>>0<A>>>0?1:0),w=a.low=w+L,a.high=x+F+(w>>>0<L>>>0?1:0),C=u.low=C+M,u.high=S+D+(C>>>0<M>>>0?1:0),P=h.low=P+H,h.high=U+V+(P>>>0<H>>>0?1:0),O=d.low=O+z,d.high=j+N+(O>>>0<z>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[30+(i+128>>>10<<5)]=Math.floor(r/4294967296),e[31+(i+128>>>10<<5)]=r,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(u),t.HmacSHA512=e._createHmacHelper(u)}(),i.SHA512)},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];return t.apply(e,r)}}},function(t,e,r){"use strict";var i=r(2),n=r(48),s=r(50),o=r(51),a=r(52),l=r(16);t.exports=function(t){return new Promise(function(e,c){var u=t.data,h=t.headers;i.isFormData(u)&&delete h["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",p=t.auth.password||"";h.Authorization="Basic "+btoa(f+":"+p)}if(d.open(t.method.toUpperCase(),s(t.url,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in d?o(d.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:r,config:t,request:d};n(e,c,i),d=null}},d.onerror=function(){c(l("Network Error",t,null,d)),d=null},d.ontimeout=function(){c(l("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",d)),d=null},i.isStandardBrowserEnv()){var g=r(53),m=(t.withCredentials||a(t.url))&&t.xsrfCookieName?g.read(t.xsrfCookieName):void 0;m&&(h[t.xsrfHeaderName]=m)}if("setRequestHeader"in d&&i.forEach(h,function(t,e){void 0===u&&"content-type"===e.toLowerCase()?delete h[e]:d.setRequestHeader(e,t)}),t.withCredentials&&(d.withCredentials=!0),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){d&&(d.abort(),c(t),d=null)}),void 0===u&&(u=null),d.send(u)})}},function(t,e,r){"use strict";var i=r(49);t.exports=function(t,e,r,n,s){var o=new Error(t);return i(o,e,r,n,s)}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},function(t,e,r){t.exports=r(61)},function(t,e,r){var i;t.exports=(i=r(0),function(){if("function"==typeof ArrayBuffer){var t=i.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var r=t.byteLength,i=[],n=0;n<r;n++)i[n>>>2]|=t[n]<<24-n%4*8;e.call(this,i,r)}else e.apply(this,arguments)}).prototype=t}}(),i.lib.WordArray)},function(t,e,r){var i;t.exports=(i=r(0),function(){var t=i,e=t.lib.WordArray,r=t.enc;function n(t){return t<<8&4278255360|t>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],n=0;n<r;n+=2){var s=e[n>>>2]>>>16-n%4*8&65535;i.push(String.fromCharCode(s))}return i.join("")},parse:function(t){for(var r=t.length,i=[],n=0;n<r;n++)i[n>>>1]|=t.charCodeAt(n)<<16-n%2*16;return e.create(i,2*r)}},r.Utf16LE={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],s=0;s<r;s+=2){var o=n(e[s>>>2]>>>16-s%4*8&65535);i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var r=t.length,i=[],s=0;s<r;s++)i[s>>>1]|=n(t.charCodeAt(s)<<16-s%2*16);return e.create(i,2*r)}}}(),i.enc.Utf16)},function(t,e,r){var i,n,s,o,a,l;t.exports=(i=r(0),r(12),s=(n=i).lib.WordArray,o=n.algo,a=o.SHA256,l=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=a._doFinalize.call(this);return t.sigBytes-=4,t}}),n.SHA224=a._createHelper(l),n.HmacSHA224=a._createHmacHelper(l),i.SHA224)},function(t,e,r){var i,n,s,o,a,l,c,u;t.exports=(i=r(0),r(7),r(13),s=(n=i).x64,o=s.Word,a=s.WordArray,l=n.algo,c=l.SHA512,u=l.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var t=c._doFinalize.call(this);return t.sigBytes-=16,t}}),n.SHA384=c._createHelper(u),n.HmacSHA384=c._createHmacHelper(u),i.SHA384)},function(t,e,r){var i;t.exports=(i=r(0),r(7),function(t){var e=i,r=e.lib,n=r.WordArray,s=r.Hasher,o=e.x64.Word,a=e.algo,l=[],c=[],u=[];!function(){for(var t=1,e=0,r=0;r<24;r++){l[t+5*e]=(r+1)*(r+2)/2%64;var i=(2*t+3*e)%5;t=e%5,e=i}for(t=0;t<5;t++)for(e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var n=1,s=0;s<24;s++){for(var a=0,h=0,d=0;d<7;d++){if(1&n){var f=(1<<d)-1;f<32?h^=1<<f:a^=1<<f-32}128&n?n=n<<1^113:n<<=1}u[s]=o.create(a,h)}}();var h=[];!function(){for(var t=0;t<25;t++)h[t]=o.create()}();var d=a.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var r=this._state,i=this.blockSize/2,n=0;n<i;n++){var s=t[e+2*n],o=t[e+2*n+1];s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(O=r[n]).high^=o,O.low^=s}for(var a=0;a<24;a++){for(var d=0;d<5;d++){for(var f=0,p=0,g=0;g<5;g++)f^=(O=r[d+5*g]).high,p^=O.low;var m=h[d];m.high=f,m.low=p}for(d=0;d<5;d++){var y=h[(d+4)%5],b=h[(d+1)%5],_=b.high,v=b.low;for(f=y.high^(_<<1|v>>>31),p=y.low^(v<<1|_>>>31),g=0;g<5;g++)(O=r[d+5*g]).high^=f,O.low^=p}for(var x=1;x<25;x++){var w=(O=r[x]).high,S=O.low,C=l[x];C<32?(f=w<<C|S>>>32-C,p=S<<C|w>>>32-C):(f=S<<C-32|w>>>64-C,p=w<<C-32|S>>>64-C);var U=h[c[x]];U.high=f,U.low=p}var P=h[0],j=r[0];for(P.high=j.high,P.low=j.low,d=0;d<5;d++)for(g=0;g<5;g++){var O=r[x=d+5*g],T=h[x],k=h[(d+1)%5+5*g],B=h[(d+2)%5+5*g];O.high=T.high^~k.high&B.high,O.low=T.low^~k.low&B.low}O=r[0];var I=u[a];O.high^=I.high,O.low^=I.low}},_doFinalize:function(){var e=this._data,r=e.words,i=(this._nDataBytes,8*e.sigBytes),s=32*this.blockSize;r[i>>>5]|=1<<24-i%32,r[(t.ceil((i+1)/s)*s>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var o=this._state,a=this.cfg.outputLength/8,l=a/8,c=[],u=0;u<l;u++){var h=o[u],d=h.high,f=h.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c.push(f),c.push(d)}return new n.init(c,a)},clone:function(){for(var t=s.clone.call(this),e=t._state=this._state.slice(0),r=0;r<25;r++)e[r]=e[r].clone();return t}});e.SHA3=s._createHelper(d),e.HmacSHA3=s._createHmacHelper(d)}(Math),i.SHA3)},function(t,e,r){var i;t.exports=(i=r(0),
/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
function(t){var e=i,r=e.lib,n=r.WordArray,s=r.Hasher,o=e.algo,a=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=n.create([0,1518500249,1859775393,2400959708,2840853838]),d=n.create([1352829926,1548603684,1836072691,2053994217,0]),f=o.RIPEMD160=s.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var i=e+r,n=t[i];t[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var s,o,f,v,x,w,S,C,U,P,j,O=this._hash.words,T=h.words,k=d.words,B=a.words,I=l.words,E=c.words,$=u.words;for(w=s=O[0],S=o=O[1],C=f=O[2],U=v=O[3],P=x=O[4],r=0;r<80;r+=1)j=s+t[e+B[r]]|0,j+=r<16?p(o,f,v)+T[0]:r<32?g(o,f,v)+T[1]:r<48?m(o,f,v)+T[2]:r<64?y(o,f,v)+T[3]:b(o,f,v)+T[4],j=(j=_(j|=0,E[r]))+x|0,s=x,x=v,v=_(f,10),f=o,o=j,j=w+t[e+I[r]]|0,j+=r<16?b(S,C,U)+k[0]:r<32?y(S,C,U)+k[1]:r<48?m(S,C,U)+k[2]:r<64?g(S,C,U)+k[3]:p(S,C,U)+k[4],j=(j=_(j|=0,$[r]))+P|0,w=P,P=U,U=_(C,10),C=S,S=j;j=O[1]+f+U|0,O[1]=O[2]+v+P|0,O[2]=O[3]+x+w|0,O[3]=O[4]+s+S|0,O[4]=O[0]+o+C|0,O[0]=j},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process();for(var n=this._hash,s=n.words,o=0;o<5;o++){var a=s[o];s[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return n},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});function p(t,e,r){return t^e^r}function g(t,e,r){return t&e|~t&r}function m(t,e,r){return(t|~e)^r}function y(t,e,r){return t&r|e&~r}function b(t,e,r){return t^(e|~r)}function _(t,e){return t<<e|t>>>32-e}e.RIPEMD160=s._createHelper(f),e.HmacRIPEMD160=s._createHmacHelper(f)}(Math),i.RIPEMD160)},function(t,e,r){var i,n,s,o,a,l,c,u,h;t.exports=(i=r(0),r(9),r(10),s=(n=i).lib,o=s.Base,a=s.WordArray,l=n.algo,c=l.SHA1,u=l.HMAC,h=l.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,i=u.create(r.hasher,t),n=a.create(),s=a.create([1]),o=n.words,l=s.words,c=r.keySize,h=r.iterations;o.length<c;){var d=i.update(e).finalize(s);i.reset();for(var f=d.words,p=f.length,g=d,m=1;m<h;m++){g=i.finalize(g),i.reset();for(var y=g.words,b=0;b<p;b++)f[b]^=y[b]}n.concat(d),l[0]++}return n.sigBytes=4*c,n}}),n.PBKDF2=function(t,e,r){return h.create(r).compute(t,e)},i.PBKDF2)},function(t,e,r){var i;t.exports=(i=r(0),r(1),i.mode.CFB=function(){var t=i.lib.BlockCipherMode.extend();function e(t,e,r,i){var n=this._iv;if(n){var s=n.slice(0);this._iv=void 0}else s=this._prevBlock;i.encryptBlock(s,0);for(var o=0;o<r;o++)t[e+o]^=s[o]}return t.Encryptor=t.extend({processBlock:function(t,r){var i=this._cipher,n=i.blockSize;e.call(this,t,r,n,i),this._prevBlock=t.slice(r,r+n)}}),t.Decryptor=t.extend({processBlock:function(t,r){var i=this._cipher,n=i.blockSize,s=t.slice(r,r+n);e.call(this,t,r,n,i),this._prevBlock=s}}),t}(),i.mode.CFB)},function(t,e,r){var i,n,s;t.exports=(i=r(0),r(1),i.mode.CTR=(n=i.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,n=this._iv,s=this._counter;n&&(s=this._counter=n.slice(0),this._iv=void 0);var o=s.slice(0);r.encryptBlock(o,0),s[i-1]=s[i-1]+1|0;for(var a=0;a<i;a++)t[e+a]^=o[a]}}),n.Decryptor=s,n),i.mode.CTR)},function(t,e,r){var i;t.exports=(i=r(0),r(1),
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
i.mode.CTRGladman=function(){var t=i.lib.BlockCipherMode.extend();function e(t){if(255==(t>>24&255)){var e=t>>16&255,r=t>>8&255,i=255&t;255===e?(e=0,255===r?(r=0,255===i?i=0:++i):++r):++e,t=0,t+=e<<16,t+=r<<8,t+=i}else t+=1<<24;return t}var r=t.Encryptor=t.extend({processBlock:function(t,r){var i=this._cipher,n=i.blockSize,s=this._iv,o=this._counter;s&&(o=this._counter=s.slice(0),this._iv=void 0),function(t){0===(t[0]=e(t[0]))&&(t[1]=e(t[1]))}(o);var a=o.slice(0);i.encryptBlock(a,0);for(var l=0;l<n;l++)t[r+l]^=a[l]}});return t.Decryptor=r,t}(),i.mode.CTRGladman)},function(t,e,r){var i,n,s;t.exports=(i=r(0),r(1),i.mode.OFB=(n=i.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,n=this._iv,s=this._keystream;n&&(s=this._keystream=n.slice(0),this._iv=void 0),r.encryptBlock(s,0);for(var o=0;o<i;o++)t[e+o]^=s[o]}}),n.Decryptor=s,n),i.mode.OFB)},function(t,e,r){var i,n;t.exports=(i=r(0),r(1),i.mode.ECB=((n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),n.Decryptor=n.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),n),i.mode.ECB)},function(t,e,r){var i;t.exports=(i=r(0),r(1),i.pad.AnsiX923={pad:function(t,e){var r=t.sigBytes,i=4*e,n=i-r%i,s=r+n-1;t.clamp(),t.words[s>>>2]|=n<<24-s%4*8,t.sigBytes+=n},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},i.pad.Ansix923)},function(t,e,r){var i;t.exports=(i=r(0),r(1),i.pad.Iso10126={pad:function(t,e){var r=4*e,n=r-t.sigBytes%r;t.concat(i.lib.WordArray.random(n-1)).concat(i.lib.WordArray.create([n<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},i.pad.Iso10126)},function(t,e,r){var i;t.exports=(i=r(0),r(1),i.pad.Iso97971={pad:function(t,e){t.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(t,e)},unpad:function(t){i.pad.ZeroPadding.unpad(t),t.sigBytes--}},i.pad.Iso97971)},function(t,e,r){var i;t.exports=(i=r(0),r(1),i.pad.ZeroPadding={pad:function(t,e){var r=4*e;t.clamp(),t.sigBytes+=r-(t.sigBytes%r||r)},unpad:function(t){for(var e=t.words,r=t.sigBytes-1;!(e[r>>>2]>>>24-r%4*8&255);)r--;t.sigBytes=r+1}},i.pad.ZeroPadding)},function(t,e,r){var i;t.exports=(i=r(0),r(1),i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding)},function(t,e,r){var i,n,s,o;t.exports=(i=r(0),r(1),s=(n=i).lib.CipherParams,o=n.enc.Hex,n.format.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return s.create({ciphertext:e})}},i.format.Hex)},function(t,e,r){var i;t.exports=(i=r(0),r(5),r(6),r(4),r(1),function(){var t=i,e=t.lib.BlockCipher,r=t.algo,n=[],s=[],o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var r=0,i=0;for(e=0;e<256;e++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,n[r]=p,s[p]=r;var g=t[r],m=t[g],y=t[m],b=257*t[p]^16843008*p;o[r]=b<<24|b>>>8,a[r]=b<<16|b>>>16,l[r]=b<<8|b>>>24,c[r]=b,b=16843009*y^65537*m^257*g^16843008*r,u[p]=b<<24|b>>>8,h[p]=b<<16|b>>>16,d[p]=b<<8|b>>>24,f[p]=b,r?(r=g^t[t[t[y^g]]],i^=t[t[i]]):r=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4,i=4*((this._nRounds=r+6)+1),s=this._keySchedule=[],o=0;o<i;o++)if(o<r)s[o]=e[o];else{var a=s[o-1];o%r?r>6&&o%r==4&&(a=n[a>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a]):(a=n[(a=a<<8|a>>>24)>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a],a^=p[o/r|0]<<24),s[o]=s[o-r]^a}for(var l=this._invKeySchedule=[],c=0;c<i;c++)o=i-c,a=c%4?s[o]:s[o-4],l[c]=c<4||o<=4?a:u[n[a>>>24]]^h[n[a>>>16&255]]^d[n[a>>>8&255]]^f[n[255&a]]}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,o,a,l,c,n)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,u,h,d,f,s),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,i,n,s,o,a){for(var l=this._nRounds,c=t[e]^r[0],u=t[e+1]^r[1],h=t[e+2]^r[2],d=t[e+3]^r[3],f=4,p=1;p<l;p++){var g=i[c>>>24]^n[u>>>16&255]^s[h>>>8&255]^o[255&d]^r[f++],m=i[u>>>24]^n[h>>>16&255]^s[d>>>8&255]^o[255&c]^r[f++],y=i[h>>>24]^n[d>>>16&255]^s[c>>>8&255]^o[255&u]^r[f++],b=i[d>>>24]^n[c>>>16&255]^s[u>>>8&255]^o[255&h]^r[f++];c=g,u=m,h=y,d=b}g=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&d])^r[f++],m=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^r[f++],y=(a[h>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^r[f++],b=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^r[f++],t[e]=g,t[e+1]=m,t[e+2]=y,t[e+3]=b},keySize:8});t.AES=e._createHelper(g)}(),i.AES)},function(t,e,r){var i;t.exports=(i=r(0),r(5),r(6),r(4),r(1),function(){var t=i,e=t.lib,r=e.WordArray,n=e.BlockCipher,s=t.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=n.extend({_doReset:function(){for(var t=this._key.words,e=[],r=0;r<56;r++){var i=o[r]-1;e[r]=t[i>>>5]>>>31-i%32&1}for(var n=this._subKeys=[],s=0;s<16;s++){var c=n[s]=[],u=l[s];for(r=0;r<24;r++)c[r/6|0]|=e[(a[r]-1+u)%28]<<31-r%6,c[4+(r/6|0)]|=e[28+(a[r+24]-1+u)%28]<<31-r%6;for(c[0]=c[0]<<1|c[0]>>>31,r=1;r<7;r++)c[r]=c[r]>>>4*(r-1)+3;c[7]=c[7]<<5|c[7]>>>27}var h=this._invSubKeys=[];for(r=0;r<16;r++)h[r]=n[15-r]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,r){this._lBlock=t[e],this._rBlock=t[e+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var i=0;i<16;i++){for(var n=r[i],s=this._lBlock,o=this._rBlock,a=0,l=0;l<8;l++)a|=c[l][((o^n[l])&u[l])>>>0];this._lBlock=o,this._rBlock=s^a}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(t,e){var r=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=r,this._lBlock^=r<<t}function f(t,e){var r=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=r,this._rBlock^=r<<t}t.DES=n._createHelper(h);var p=s.TripleDES=n.extend({_doReset:function(){var t=this._key.words;this._des1=h.createEncryptor(r.create(t.slice(0,2))),this._des2=h.createEncryptor(r.create(t.slice(2,4))),this._des3=h.createEncryptor(r.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=n._createHelper(p)}(),i.TripleDES)},function(t,e,r){var i;t.exports=(i=r(0),r(5),r(6),r(4),r(1),function(){var t=i,e=t.lib.StreamCipher,r=t.algo,n=r.RC4=e.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes,i=this._S=[],n=0;n<256;n++)i[n]=n;n=0;for(var s=0;n<256;n++){var o=n%r,a=e[o>>>2]>>>24-o%4*8&255;s=(s+i[n]+a)%256;var l=i[n];i[n]=i[s],i[s]=l}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=s.call(this)},keySize:8,ivSize:0});function s(){for(var t=this._S,e=this._i,r=this._j,i=0,n=0;n<4;n++){r=(r+t[e=(e+1)%256])%256;var s=t[e];t[e]=t[r],t[r]=s,i|=t[(t[e]+t[r])%256]<<24-8*n}return this._i=e,this._j=r,i}t.RC4=e._createHelper(n);var o=r.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)s.call(this)}});t.RC4Drop=e._createHelper(o)}(),i.RC4)},function(t,e,r){var i;t.exports=(i=r(0),r(5),r(6),r(4),r(1),function(){var t=i,e=t.lib.StreamCipher,r=t.algo,n=[],s=[],o=[],a=r.Rabbit=e.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,r=0;r<4;r++)t[r]=16711935&(t[r]<<8|t[r]>>>24)|4278255360&(t[r]<<24|t[r]>>>8);var i=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],n=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,r=0;r<4;r++)l.call(this);for(r=0;r<8;r++)n[r]^=i[r+4&7];if(e){var s=e.words,o=s[0],a=s[1],c=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=c>>>16|4294901760&u,d=u<<16|65535&c;for(n[0]^=c,n[1]^=h,n[2]^=u,n[3]^=d,n[4]^=c,n[5]^=h,n[6]^=u,n[7]^=d,r=0;r<4;r++)l.call(this)}},_doProcessBlock:function(t,e){var r=this._X;l.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),t[e+i]^=n[i]},blockSize:4,ivSize:2});function l(){for(var t=this._X,e=this._C,r=0;r<8;r++)s[r]=e[r];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<s[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<s[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<s[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<s[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<s[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<s[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<s[6]>>>0?1:0)|0,this._b=e[7]>>>0<s[7]>>>0?1:0,r=0;r<8;r++){var i=t[r]+e[r],n=65535&i,a=i>>>16,l=((n*n>>>17)+n*a>>>15)+a*a,c=((4294901760&i)*i|0)+((65535&i)*i|0);o[r]=l^c}t[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,t[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,t[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,t[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,t[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,t[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,t[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,t[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}t.Rabbit=e._createHelper(a)}(),i.Rabbit)},function(t,e,r){var i;t.exports=(i=r(0),r(5),r(6),r(4),r(1),function(){var t=i,e=t.lib.StreamCipher,r=t.algo,n=[],s=[],o=[],a=r.RabbitLegacy=e.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(e){var s=e.words,o=s[0],a=s[1],c=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=c>>>16|4294901760&u,d=u<<16|65535&c;for(i[0]^=c,i[1]^=h,i[2]^=u,i[3]^=d,i[4]^=c,i[5]^=h,i[6]^=u,i[7]^=d,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(t,e){var r=this._X;l.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),t[e+i]^=n[i]},blockSize:4,ivSize:2});function l(){for(var t=this._X,e=this._C,r=0;r<8;r++)s[r]=e[r];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<s[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<s[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<s[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<s[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<s[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<s[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<s[6]>>>0?1:0)|0,this._b=e[7]>>>0<s[7]>>>0?1:0,r=0;r<8;r++){var i=t[r]+e[r],n=65535&i,a=i>>>16,l=((n*n>>>17)+n*a>>>15)+a*a,c=((4294901760&i)*i|0)+((65535&i)*i|0);o[r]=l^c}t[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,t[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,t[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,t[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,t[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,t[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,t[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,t[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}t.RabbitLegacy=e._createHelper(a)}(),i.RabbitLegacy)},function(t,e,r){"use strict";var i=r(2),n=r(14),s=r(45),o=r(11);function a(t){var e=new s(t),r=n(s.prototype.request,e);return i.extend(r,s.prototype,e),i.extend(r,e),r}var l=a(o);l.Axios=s,l.create=function(t){return a(i.merge(o,t))},l.Cancel=r(18),l.CancelToken=r(59),l.isCancel=r(17),l.all=function(t){return Promise.all(t)},l.spread=r(60),t.exports=l,t.exports.default=l},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,r){"use strict";var i=r(11),n=r(2),s=r(54),o=r(55);function a(t){this.defaults=t,this.interceptors={request:new s,response:new s}}a.prototype.request=function(t){"string"==typeof t&&(t=n.merge({url:arguments[0]},arguments[1])),(t=n.merge(i,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[o,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},n.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,r){return this.request(n.merge(r||{},{method:t,url:e}))}}),n.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,r,i){return this.request(n.merge(i||{},{method:t,url:e,data:r}))}}),t.exports=a},function(t,e){var r,i,n=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&f())}function f(){if(!u){var t=a(d);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){"use strict";var i=r(2);t.exports=function(t,e){i.forEach(t,function(r,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[i])})}},function(t,e,r){"use strict";var i=r(16);t.exports=function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(i("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},function(t,e,r){"use strict";t.exports=function(t,e,r,i,n){return t.config=e,r&&(t.code=r),t.request=i,t.response=n,t}},function(t,e,r){"use strict";var i=r(2);function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var s;if(r)s=r(e);else if(i.isURLSearchParams(e))s=e.toString();else{var o=[];i.forEach(e,function(t,e){null!=t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),o.push(n(e)+"="+n(t))}))}),s=o.join("&")}return s&&(t+=(-1===t.indexOf("?")?"?":"&")+s),t}},function(t,e,r){"use strict";var i=r(2),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,s,o={};return t?(i.forEach(t.split("\n"),function(t){if(s=t.indexOf(":"),e=i.trim(t.substr(0,s)).toLowerCase(),r=i.trim(t.substr(s+1)),e){if(o[e]&&n.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([r]):o[e]?o[e]+", "+r:r}}),o):o}},function(t,e,r){"use strict";var i=r(2);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var i=t;return e&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=i.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var i=r(2);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,r,n,s,o){var a=[];a.push(t+"="+encodeURIComponent(e)),i.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),i.isString(n)&&a.push("path="+n),i.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var i=r(2);function n(){this.handlers=[]}n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=n},function(t,e,r){"use strict";var i=r(2),n=r(56),s=r(17),o=r(11),a=r(57),l=r(58);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!a(t.url)&&(t.url=l(t.baseURL,t.url)),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||o.adapter)(t).then(function(e){return c(t),e.data=n(e.data,e.headers,t.transformResponse),e},function(e){return s(e)||(c(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,r){"use strict";var i=r(2);t.exports=function(t,e,r){return i.forEach(r,function(r){t=r(t,e)}),t}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var i=r(18);function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new i(t),e(r.reason))})}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n(function(e){t=e}),cancel:t}},t.exports=n},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){"use strict";r.r(e);var i=r(8),n=r(3),s=r.n(n);const o=1e5,a=126,l=82,c=240,u=3,h={create:"created",update:"updated",delete:"deleted",recycle:"recycled",get:"get",copy:"copied",move:"moved",restore:"restored",clear:"cleared",erase:"erased",send:"sent"},d={101:!0,109:!0,110:!0,113:!0,114:!0,116:!0,119:!0,121:!0,122:!0,123:!0,175:!0,851:!0,10102:!0},f={AppAuthor:!0,AppEditor:!0,Author:!0,CheckedOutTitle:!0,CheckedOutUserId:!0,CheckoutUser:!0,ContentTypeId:!0,Created:!0,Created_x0020_By:!0,Created_x0020_Date:!0,DocConcurrencyNumber:!0,Editor:!0,FSObjType:!0,FileDirRef:!0,FileLeafRef:!0,FileRef:!0,File_x0020_Size:!0,File_x0020_Type:!0,FolderChildCount:!0,GUID:!0,HTML_x0020_File_x0020_Type:!0,ID:!0,InstanceID:!0,IsCheckedoutToLocal:!0,ItemChildCount:!0,Last_x0020_Modified:!0,MetaInfo:!0,Modified:!0,Modified_x0020_By:!0,Order:!0,ParentLeafName:!0,ParentVersionString:!0,ProgId:!0,ScopeId:!0,SortBehavior:!0,SyncClientId:!0,TemplateUrl:!0,UniqueId:!0,VirusStatus:!0,WorkflowInstanceID:!0,WorkflowVersion:!0,owshiddenversion:!0,xd_ProgID:!0,xd_Signature:!0,_CheckinComment:!0,_CopySource:!0,_HasCopyDestinations:!0,_IsCurrentVersion:!0,_Level:!0,_ModerationComments:!0,_ModerationStatus:!0,_SharedFileIndex:!0,_SourceUrl:!0,_UIVersion:!0,_UIVersionString:!0,ImageHeight:!0,ImageWidth:!0,PreviewExists:!0,ThumbnailExists:!0},p=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase(),g=t=>(e,r)=>t(e)(r),m={I:t=>t,K:t=>()=>t,A:t=>e=>t(e),U:t=>t(t),Y:t=>m.U(e=>t(t=>e(e)(t))),C:t=>e=>r=>t(r)(e),S:t=>e=>r=>t(r)(e(r)),SI:t=>e=>r=>e(r)(t(r)),SA:t=>e=>async r=>t(r)(await e(r)),SIA:t=>e=>async r=>e(r)(await t(r))},y=m.I,b=m.K,_=m.Y,v=m.C,x=(m.S,m.SI,m.SA,m.SIA,t=>e=>(t(e),e)),w=t=>([e,r])=>i=>t(i)?e(i):r?r(i):i,S=t=>e=>r=>{const i=e[t(r)];return i?i(r):e.default?e.default(r):void 0},C=S(p),U=t=>e=>t+e,P=t=>e=>t<e,j=t=>e=>t.test(e),O=t=>e=>r=>r.replace(t,e),T=t=>e=>e.match(t)||[],k=t=>O(t)(""),B=t=>e=>e.split(t),I=t=>t.trim(),E=t=>"array"===p(t)?t:t?[t]:[],$=t=>e=>e.map(t),R=t=>e=>e.filter(t),A=t=>e=>e.join(t),F=(R(t=>!!t),R(t=>void 0!==t)),L=t=>e=>t.concat(e),D=t=>e=>r=>r.reduce(g(t),C({object:b({}),array:b([]),default:y})(e)),M=D(t=>nt([w(dt)([M,y]),L(t)]))([]),V=t=>t[t.length-1],H=((t,e)=>r=>r.slice(t,e))(0,-1),N=()=>[],z=((t=0)=>e=>r=>{let i=t;return D(t=>r=>{void 0===t[i]&&(t[i]=[]);const n=t[i];return n.push(r),n.length===e&&(i+=1),t})([])(r)})(),W=t=>R(e=>!!e[t]),q=t=>nt([D(e=>r=>(e[r[t]]=r,e))({}),Object.values]),K=t=>e=>e[t]?e[t]():e,Q=t=>e=>r=>r[t]?r[t](e):r,G=t=>e=>r=>e[t]?e[t](r):e,X=t=>e=>r=>e[t](...r),J=t=>e=>e[t],Z=t=>Object.keys(t),Y=t=>(...e)=>new t(...e),tt=t=>new t,et=t=>e=>{const r=Reflect.ownKeys(t);for(let i=0;i<r.length;i+=1){const n=r[i];if(e[n])return t[n](e);if(e.default)return e.default(e)}},rt=()=>null,it=t=>_(e=>([r,...i])=>n=>i.length?e(i)(t(r)(n)):t(r)(n)),nt=D(t=>e=>r=>e(t(r)))(y),st=(D(t=>e=>async r=>e(await t(r)))(y),t=>!!t),ot=t=>!t,at=t=>e=>st(t&&e),lt=()=>!1,ct=(D(at)(!0),D(t=>e=>st(t||e))(!1),t=>e=>e===t),ut=(nt([ct,ot]),t=>"number"===p(t)),ht=t=>"string"===p(t),dt=t=>"array"===p(t),ft=t=>"object"===p(t),pt=t=>{const e=p(t);return"blob"===e||"file"===e},gt=j(/^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/),mt=t=>null===t,yt=nt([mt,ot]),bt=t=>void 0===t,_t=nt([bt,ot]),vt=nt([t=>0===t,ot]),xt=nt([t=>"number"===p(t)&&"NaN"===t.toString(),ot]),wt=t=>ut(t)&&vt(t)&&xt(t),St=t=>""===t,Ct=nt([St,ot]),Ut=nt([R(_t),J("length"),st]),Pt=nt([Ut,ot]),jt=w(ft)([nt([Z,Ut]),lt]),Ot=(nt([Z,Pt]),t=>_t(t)&&yt(t)),Tt=(nt([Ot,ot]),w(Ot)([C({number:wt,string:Ct,array:Ut,object:jt,null:lt,default:()=>!0}),st])),kt=(nt([Tt,ot]),Q("hasOwnProperty"),t=>e=>e[t]),Bt=t=>nt([J(t),Ot]),It=t=>nt([J(t),Tt]),Et=t=>e=>r=>{try{return t(r)}catch(t){return e(t)(r)}},$t=t=>{throw new Error(t)},Rt=(x(console.log),(t,e={})=>{e.silent||e.silentInfo||console.log(t)}),At=(t,e={})=>{const{box:r,name:i,detailed:n}=e,s=r.getCount();Rt(`${h[t]} ${s} ${i}${s>1?"s":""}${n?`: ${r.join()}`:""} `,e)},Ft=(t,e={})=>{const{box:r,name:i,detailed:n,contextUrl:s}=e,o=r.getCount(t);Rt(`${h[t]} ${o} ${i}${o>1?"s":""} at ${s||"/"}${n?`: ${r.join()}`:""}`,e)},Lt=(t,e={})=>{const{box:r,name:i,detailed:n,contextUrl:s,listUrl:o}=e,a=r.getCount(t);Rt(`${h[t]} ${a} ${i}${a>1?"s":""} in ${o} at ${s||"/"}${n?`: ${r.join()}`:""}`,e)},Dt=v((t=>e=>r=>E(r).reduce(g(v(t)),E(e)))(nt([t=>D(e=>r=>{const i=r[t],n=Ot(i)&&i.get_lookupId?i.get_lookupId():i,s=e[n];return e[n]=bt(s)?[r]:dt(s)?L(s)(r):[s,r],e})({}),t=>_(e=>r=>C({array:t,object:i=>{const n=Reflect.ownKeys(i);for(let s=0;s<n.length;s+=1){const o=n[s],a=i[o];r[o]=dt(a)?t(a):e({})(a)}return r},default:y}))({})]))),Mt=t=>e=>D(e=>r=>{const i=r[t];return e[Ot(i)&&i.get_lookupId?i.get_lookupId():i]=r,e})({})(E(e)),Vt=j(/\/$/),Ht=j(/\.[^\/]+$/),Nt=W("Url"),zt=(R(nt([J("ID"),wt])),R(t=>t.Url&&Ht(t.Url))),Wt=q("Url"),qt=w(j(/^\//))([y,U("/")]),Kt=k(/\/$/),Qt=k(/^\//),Gt=O(/\/\/+/g)("/"),Xt=B("/"),Jt=nt([Kt,Xt,V]),Zt=A("/"),Yt=nt([Kt,Xt,H,Zt]),te=w(j(/\./))([Yt,Kt]),ee=w(j(/\./))([Jt,rt]),re=t=>Ct(t)&&!Vt(t),ie=t=>e=>(r={})=>{const{Url:i,Folder:n}=r;if(n){const t=Qt(n);return i?`${t} /${Jt(i)}`:t}return i&&j(/\//)(i)?"/"===i?"/":Qt(V(B("@list@")(O(e)("@list@")(O(Qt(t))("@web@")(i))))):i},ne=t=>(e={})=>{const{Url:r,Folder:i}=e;if(i){const t=Qt(i);return r?`${t}/${Jt(r)}`:t}return r&&j(/\//)(r)?"/"===r?"/":Qt(V(B("@web@")(O(Qt(t))("@web@")(r)))):r};class se{constructor(t,e,r=y){this.isArray=dt(t),this.prop="Url",this.joinProp="Url",this.value=this.isArray?w(Ut)([nt([$(e),r]),b([e()])])(t):e(t)}async chain(t){return this.isArray?Promise.all($(t)(this.value)):t(this.value)}join(){return this.isArray?A(", ")($(J(this.joinProp))(this.value)):this.value[this.joinProp]}getCount(){return this.isArray?this.value.length:this.value[this.prop]?1:0}getHead(){return this.isArray?this.value[0]:this.value}getHeadPropValue(){return this.isArray?this.value[0]?this.value[0][this.prop]:void 0:this.value[this.prop]}}const oe=({contextUrl:t="/",elementBox:e,bundleSize:r=252})=>async i=>{let n=0,s=ce(t);const o=[s],a=await e.chain(e=>((n+=1)>=r&&(s=ce(t),o.push(s),n=0),i({clientContext:s,element:e})));return{clientContexts:o,result:a}},ae=({elementBox:t})=>e=>t.chain(async t=>e({element:t})),le=Y(SP.ClientContext),ce=nt([nt([Gt,Kt,qt,le]),x(Q("set_requestTimeout")(36e5))]),ue=t=>w(Ot)([nt([w(b(t))([K("get_listItemAllFields")]),et({get_fieldValues:K("get_fieldValues"),get_objectData:nt([K("get_objectData"),K("get_properties")]),default:Et(nt([JSON.stringify,U("Wrong spObject: "),$t]))($t)})])]),he=nt([w(kt("body"))([nt([J("body"),w(ht)([JSON.parse])]),J("data")]),w(kt("d"))([nt([J("d"),w(kt("results"))([J("results")])])])]),de=(t,e={})=>w(dt)([nt([M,F,w(b(e.expanded))([y,nt([$(ue(e.asItem)),w(b(e.groupBy))([Dt(e.groupBy),w(b(e.mapBy))([Mt(e.mapBy)])])])])]),w(b(e.expanded))([y,ue(e.asItem)])])(t),fe=(t,e={})=>w(dt)([nt([M,nt([w(b(e.expanded))([y]),$(he),w(b(e.groupBy))([Dt(e.groupBy),w(b(e.mapBy))([Mt(e.mapBy)])])])]),he])(t),pe=w(jt)([w(It("view"))([w(It("groupBy"))([t=>L(E(t.view))(E(t.groupBy)),nt([J("view"),E])]),N]),N]),ge=(t,e,r={})=>w(kt("getEnumerator"))([nt([t=>nt([b(pe(r)),w(Ut)([e=>[t,`Include(${e})`],b([t])])])(t),X("loadQuery")(t)]),x(nt([t=>nt([b(pe(r)),w(Ut)([e=>[t,e],b([t])])])(t),X("load")(t)]))])(e),me=async(t,e={})=>new Promise((r,i)=>{t.executeQueryAsync(()=>r(),(t,r)=>{const{silent:n,silentErrors:s}=e;if(!n&&!s){const t=r.get_errorTraceCorrelationId();console.error(`\nMessage: ${r.get_message().replace(/\n{1,}/g," ")}\nValue: ${r.get_errorValue()}\nType: ${r.get_errorTypeName()}\nId: ${t}`)}i(r)})}),ye=async(t,e,r)=>{const i=ge(t,e,r);return await me(t,r),i},be=async(t,e={})=>nt([Gt,Kt,qt,Y(SP.RequestExecutor),t=>new Promise((r,i)=>t.executeAsync({...e,method:nt([J("method"),w(j(/post/i))([b("POST"),b("GET")])])(e),success:r,error:t=>{const{silent:r,silentErrors:n}=e;if(!r&&!n){const{body:e}=t;let r=e;if("string"===p(t.body))try{r=JSON.parse(t.body).error.message.value}catch(t){}console.error(`\nMessage: ${t.statusText}\nCode: ${t.statusCode}\nValue: ${r}`)}i(t)}}))])(t),_e=C({arraybuffer:nt([Y(Uint8Array),D((t=>e=>r=>e+t(r))(String.fromCharCode))(""),btoa]),default:Et(btoa)(()=>y)}),ve=t=>e=>r=>e.set_item(t,r),xe=t=>w(b(t))([it(t=>nt([K("get_folders"),Q("getByUrl")(t)]))(nt([O(/\/\/+/)("/"),B("/")])(t)),y]),we=t=>e=>r=>{const i=Reflect.ownKeys(e);for(let n=0;n<i.length;n+=1){const s=i[n],o=t[s];if(o){const t=e[s],i=ve(o.InternalName)(r),n=t=>e=>nt([t(e),i]);switch(o.TypeAsString){case"Lookup":n(Ue)(SP.FieldLookupValue)(t);break;case"LookupMulti":n(Se)(SP.FieldLookupValue)(E(t));break;case"User":n(Ue)(SP.FieldUserValue)(t);break;case"UserMulti":n(Se)(SP.FieldUserValue)(E(t));break;case"TaxonomyFieldTypeMulti":C({object:nt([J("$2_1"),nt([D(t=>e=>t.concat(`-1;#${e.get_label()}|${e.get_termGuid()}`))([]),A(";#"),i])]),array:nt([A(";"),ve("TaxKeywordTaxHTField")(r)]),string:ve("TaxKeywordTaxHTField")(r)})(t);break;default:i(t)}}}return r.update(),r},Se=t=>nt([D(e=>w(Ot)([nt([Ue(t),L(e)])]))([]),w(Ut)([y,rt])]),Ce=t=>e=>nt([tt,x(Q("set_lookupId")(e))])(t),Ue=t=>nt([w(mt)([rt,w(kt("get_lookupId"))([nt([K("get_lookupId"),Ce(t)]),nt([parseInt,w(b(at(ut)(P(0))))([Ce(t),rt])])])])]),Pe=t=>e=>{const r=Reflect.ownKeys(t);for(let i=0;i<r.length;i+=1){const n=r[i],s=t[n];void 0!==s&&e[n]&&e[n](s)}return e},je=(K("get_context"),K("get_web"),async t=>s()({url:`${qt(t)}/_api/contextinfo`,headers:{Accept:"application/json; odata=verbose"},method:"POST"}).then(t=>t.data.d.GetContextWebInformation.FormDigestValue)),Oe="Title",Te=t=>e=>t.addFieldAsXml(e,!0,SP.AddFieldOptions.defaultValue),ke=nt([W(Oe),q(Oe)]),Be=S(p)({object:t=>{const e=Object.assign({},t);return"/"!==t[Oe]&&(e[Oe]=Qt(e[Oe])),t[Oe]||(e[Oe]=t.EntityPropertyName||t.InternalName||t.StaticName),t.Type||(e.Type="Text"),e},string:t=>({[Oe]:"/"===t?"/":Qt(Gt(t)),Type:"Text"}),default:()=>({[Oe]:void 0,Type:"Text"})});class Ie extends se{constructor(t=""){super(t,Be,ke),this.prop=Oe,this.joinProp=Oe}}var Ee=Y(class{constructor(t,e){this.name="column",this.parent=t,this.box=Y(Ie)(e),this.contextUrl=t.parent.box.getHeadPropValue(),this.listUrl=t.box.getHeadPropValue(),this.getContextSPObject=t.parent.getSPObject.bind(t.parent),this.getListSPObject=t.getSPObject.bind(t),this.iterator=oe({contextUrl:this.contextUrl,elementBox:this.box})}async get(t){const{listUrl:e}=this,{clientContexts:r,result:i}=await this.iterator(({clientContext:r,element:i})=>{const n=this.getContextSPObject(r),s=this.getListSPObject(e,n),o=i[Oe],a=St(o)||Vt(o)?this.getSPObjectCollection(s):this.getSPObject(o,s);return ge(r,a,t)});return await Promise.all(r.map(e=>me(e,t))),de(i,t)}async create(t){const{listUrl:e}=this,{clientContexts:r,result:i}=await this.iterator(({clientContext:r,element:i})=>{const n=i[Oe];if(!re(n))return;const s=this.getContextSPObject(r),o=this.getListSPObject(e,s),{Title:a=n,Type:l=i.TypeAsString||"Text",AllowMultipleValues:c,LookupWebId:u,LookupList:h,LookupField:d="Title",MaxLength:f,RichText:p,SchemaXml:g}=i,m=t=>e=>r.castTo(e,t),y=nt([w(Tt)([w(b(f))([O(/MaxLength="\d+"/)(`MaxLength="${f}"`)]),w(b(f&&"Text"===l))([b(`<Field Type="${l}" DisplayName="${a}" MaxLength="${f}"/>`),b(`<Field Type="${l}" DisplayName="${a}"/>`)])]),Te(this.getSPObjectCollection(o)),x(Pe({set_defaultValue:i.DefaultValue,set_description:i.Description,set_direction:i.Direction,set_enforceUniqueValues:i.EnforceUniqueValues,set_fieldTypeKind:i.FieldTypeKind,set_group:i.Group,set_hidden:i.Hidden||void 0,set_indexed:i.Indexed,set_jsLink:i.JsLink,set_objectVersion:i.ObjectVersion,set_readOnlyField:i.ReadOnlyField,set_required:i.Required,set_schemaXml:i.SchemaXml?i.SchemaXml.replace(/\sID="{[^}]+}"/,""):void 0,set_staticName:i.StaticName,set_title:i[Oe],set_typeAsString:i.TypeAsString,set_validationFormula:i.ValidationFormula||void 0,set_validationMessage:i.ValidationMessage||void 0})),S(b(l))({Text:m(SP.FieldText),Note:nt([m(SP.FieldMultiLineText),x(w(b(p))([Q("set_richText")(!0)]))]),Likes:m(SP.FieldNumber),Number:m(SP.FieldNumber),Boolean:m(SP.Field),Choice:m(c?SP.FieldMultiChoice:SP.FieldChoice),DateTime:m(SP.FieldDateTime),URL:m(SP.FieldUrl),RatingCount:m(SP.FieldRatingScale),AverageRating:m(SP.FieldRatingScale),Lookup:nt([m(SP.FieldLookup),x(nt([Q("set_lookupWebId")(u),Q("set_lookupList")(h),Q("set_lookupField")(d),w(b(c))([Q("set_allowMultipleValues")(!0)])]))]),LookupMulti:nt([m(SP.FieldLookup),x(nt([Q("set_lookupWebId")(u),Q("set_lookupList")(h),Q("set_lookupField")(d),Q("set_allowMultipleValues")(!0)]))]),User:nt([m(SP.FieldUser),x(w(b(c))([Q("set_allowMultipleValues")(!0)]))]),UserMulti:nt([m(SP.FieldUser),x(Q("set_allowMultipleValues")(!0))])}),x(w(Ot)([K("update")]))])(g);return ge(r,y,t)});return this.box.getCount()&&await Promise.all(r.map(e=>me(e,t))),this.report("create",t),de(i,t)}async update(t){const{listUrl:e}=this,{clientContexts:r,result:i}=await this.iterator(({clientContext:r,element:i})=>{if(!re(i[Oe]))return;const n=this.getContextSPObject(r),s=this.getListSPObject(e,n),{MaxLength:o,Title:a}=i,l=nt([Pe({set_defaultValue:i.DefaultValue,set_description:i.Description,set_direction:i.Direction,set_enforceUniqueValues:i.EnforceUniqueValues,set_fieldTypeKind:i.FieldTypeKind,set_group:i.Group,set_hidden:i.Hidden,set_indexed:i.Indexed,set_jsLink:i.JsLink,set_objectVersion:i.ObjectVersion,set_readOnlyField:i.ReadOnlyField,set_required:i.Required,set_schemaXml:i.SchemaXml,set_staticName:i.StaticName,set_title:i[Oe],set_typeAsString:i.TypeAsString,set_validationFormula:i.ValidationFormula,set_validationMessage:i.ValidationMessage}),x(nt([w(b(i.MaxLength))([Q("set_schemaXml")(`<Field Type="Text" DisplayName="${a}" MaxLength="${o}"/>`)]),K("update")]))])(this.getSPObject(i[Oe],s));return ge(r,l,t)});return this.box.getCount()&&await Promise.all(r.map(e=>me(e,t))),this.report("update",t),de(i,t)}async delete(t){const{listUrl:e}=this,{clientContexts:r,result:i}=await this.iterator(({clientContext:t,element:r})=>{const i=r[Oe];if(!re(i))return;const n=this.getContextSPObject(t),s=this.getListSPObject(e,n);return this.getSPObject(i,s).deleteObject(),i});return this.box.getCount()&&await Promise.all(r.map(e=>me(e,t))),this.report("delete",t),de(i,t)}getSPObject(t,e){const r=e.get_fields();return gt(t)?r.getById(t):r.getByInternalNameOrTitle(t)}getSPObjectCollection(t){return t.get_fields()}report(t,e={}){Lt(t,{...e,name:this.name,box:this.box,listUrl:this.listUrl,contextUrl:this.contextUrl})}of(t){return Y(this.constructor)(this.parent,t)}});const $e={},Re=t=>_(t)($e),Ae=R(Ot),Fe=nt([Ae,Re(t=>e=>([r,...i])=>i.length?e[r]?t(e[r])(i):null:e[r])]),Le=t=>nt([Ae,Re(e=>r=>([i,...n])=>n.length?(r[i]||(r[i]={}),e(r[i])(n)):(r[i]=t,t)),b(t)]),De=(nt([Ae,Re(t=>e=>([r,...i])=>i.length?e[r]?t(e[r])(i):void 0:e?delete e[r]:void 0)]),nt([Nt,Wt])),Me=S(p)({object:t=>{const e=Object.assign({},t);return t.Url||(e.Url=t.ServerRelativeUrl||t.FileRef),t.ServerRelativeUrl||(e.ServerRelativeUrl=t.Url||t.FileRef),e},string:(t="")=>{const e="/"===t?"/":Qt(Gt(t));return{Url:e,ServerRelativeUrl:e}},default:()=>({Url:"",ServerRelativeUrl:""})});class Ve extends se{constructor(t){super(t,Me,De),this.joinProp="ServerRelativeUrl"}}var He=Y(class{constructor(t,e){this.name="folder",this.parent=t,this.box=Y(Ve)(e),this.contextUrl=t.parent.box.getHeadPropValue(),this.listUrl=t.box.getHeadPropValue(),this.getContextSPObject=t.parent.getSPObject.bind(t.parent),this.getListSPObject=t.getSPObject.bind(t),this.count=this.box.getCount(),this.iterator=t=>oe({contextUrl:this.contextUrl,elementBox:this.box,bundleSize:t})}async get(t={}){const e=t.asItem?{...t,view:["ListItemAllFields"]}:{...t},{contextUrl:r,listUrl:i}=this,{clientContexts:n,result:s}=await this.iterator()(({clientContext:t,element:n})=>{const s=this.getContextSPObject(t),o=this.getListSPObject(i,s),a=ie(r)(i)(n),l=Vt(a)?this.getSPObjectCollection(a,o):this.getSPObject(a,o);return ge(t,l,e)});return await Promise.all(n.map(t=>me(t,e))),de(s,e)}async create(t={}){const{contextUrl:e,listUrl:r}=this,{asItem:i}=t,n=i?{...t,view:["ListItemAllFields"]}:{...t};await this.cacheColumns();const s=["folderCreationRetries",this.parent.parent.id];wt(Fe(s))||Le(u)(s);const{clientContexts:o,result:l}=await this.iterator(a)(({clientContext:t,element:i})=>{const s=ie(e)(r)(i);if(!re(s))return;const o=this.getContextSPObject(t),a=this.getListSPObject(r,o),l=tt(SP.ListItemCreationInformation);l.set_underlyingObjectType(SP.FileSystemObjectType.folder),l.set_leafName(s);const c={...i,Title:Jt(s)},u=we(Fe(["columns",e,r]))(c)(a.addItem(l));return ge(t,u.get_folder(),n)});let c,h;if(this.count)for(let t=0;t<o.length;t+=1){const i=o[t];if(await me(i,{...n,silentErrors:!0}).catch(async t=>{const i=t.get_message();if(!/already exists/.test(i)){if(h=!0,!/This operation can only be performed on a file;/.test(i))throw t;{const t={};await this.iterator(a)(({element:i})=>{const n=ie(e)(r)(i);t[Yt(n)]=!0}),await this.of(Object.keys(t)).create({silentInfo:!0,expanded:!0,view:["Name"]}).then(()=>{const t=Fe(s);return!!t&&(Le(t-1)(s),!0)}).catch(t=>!!/already exists/.test(t.get_message()))&&(c=!0)}}}),c)break}return c?this.create(n):h?void 0:(this.report("create",n),de(l,t))}async update(t={}){const{contextUrl:e,listUrl:r}=this,i=t.asItem?{...t,view:["ListItemAllFields"]}:{...t};await this.cacheColumns();const{clientContexts:n,result:s}=await this.iterator(l)(({clientContext:t,element:n})=>{const s=ie(e)(r)(n);if(!re(s))return;const o=this.getContextSPObject(t),a=this.getListSPObject(r,o),l=we(Fe(["columns",e,r]))(Object.assign({},n))(this.getSPObject(s,a).get_listItemAllFields());return ge(t,l.get_folder(),i)});return this.count&&await Promise.all(n.map(e=>me(e,t))),this.report("update",t),de(s,t)}async delete(t={}){const{noRecycle:e}=t,{contextUrl:r,listUrl:i}=this,{clientContexts:n,result:s}=await this.iterator(c)(({clientContext:t,element:n})=>{const s=this.getContextSPObject(t),o=this.getListSPObject(i,s),a=ie(r)(i)(n);if(!re(a))return;const l=this.getSPObject(a,o);return l.isRoot||K(e?"deleteObject":"recycle")(l),a});return this.count&&await Promise.all(n.map(e=>me(e,t))),this.report(e?"delete":"recycle",t),de(s,t)}getSPObject(t,e){let r;if(t)r=xe(t)(e.get_rootFolder());else{const t=e.get_rootFolder();t.isRoot=!0,r=t}return r}getSPObjectCollection(t,e){return this.getSPObject(Kt(t),e).get_folders()}report(t,e={}){Lt(t,{...e,name:this.name,box:this.box,listUrl:this.listUrl,contextUrl:this.contextUrl})}async cacheColumns(){const{contextUrl:t,listUrl:e}=this;if(!Fe(["columns",t,e])){const r=await this.parent.column().get({view:["TypeAsString","InternalName","Title","Sealed"],mapBy:"InternalName"});Le(r)(["columns",t,e])}}of(t){return Y(this.constructor)(this.parent,t)}});async function Ne(t,e={}){const{contextUrl:r,listUrl:i}=this;await this.iteratorREST(async({element:n})=>{const{To:s,OnlyContent:o}=n,a=ie(r)(i)(n);if(!Ht(a))return;let l,c,u;if(ft(s)?(l=s.WebUrl,c=s.ListUrl,u=ie(s.WebUrl)(s.ListUrl)(s)||""):(l=r,c=i,u=s),!l)throw new Error("Target WebUrl is missed");if(!c)throw new Error("Target ListUrl is missed");if(!a)throw new Error("Source file Url is missed");const h=this.parent.of(i),d=h.file(a),p=this.parent.parent.of(l).library(c),g=Ht(u)?u:`${u}/${ee(a)}`,m={},b={};if(!o){const t=await d.get({asItem:!0}),e=Reflect.ownKeys(t);for(let r=0;r<e.length;r+=1){const i=e[r];f[i]||null===t[i]||(m[i]=t[i])}if(Object.keys(m).length){const e=Reflect.ownKeys(m);for(let r=0;r<e.length;r+=1){const i=e[r];b[i]=t[i]}}}if(e.forced||r!==l)await p.file({Url:g,Content:await h.file(a).get({asBlob:!0}),OnProgress:n.OnProgress,Overwrite:n.Overwrite,Columns:b}).create({silentInfo:!0}),t&&await d.delete();else{const n=ce(r),s=this.getListSPObject(i,this.getContextSPObject(n)),o=this.getSPObject(a,s),l=te(u);l&&await this.parent.folder(l).create({silentInfo:!0,expanded:!0,view:["Name"]}).catch(y),o[t?"moveTo":"copyTo"](Gt(`${c}/${g}`)),await ye(n,o,e),await p.file({Url:u,Columns:b}).update({silentInfo:!0})}}),console.log(`${h[t?"move":"copy"]} ${this.count} ${this.name}(s)`)}const ze=nt([Nt,Wt]),We=S(p)({object:t=>{const e=Object.assign({},t),r=t.Content?t.Content.name:void 0;return t.Url||(e.Url=t.ServerRelativeUrl||t.FileRef||r),t.ServerRelativeUrl||(e.ServerRelativeUrl=t.Url||t.FileRef),e},string:(t="")=>{const e="/"===t?"/":Qt(Gt(t));return{Url:e,ServerRelativeUrl:e}},default:()=>({Url:"",ServerRelativeUrl:""})});async function qe(){const t={};return await this.iteratorREST(({element:e})=>{t[e.Folder||te(e.Url)]=!0}),this.parent.folder(Object.keys(t)).create({silentInfo:!0,expanded:!0,view:["Name"]}).then(()=>{const t=["fileCreationRetries",this.parent.parent.id],e=Fe(t);return!!e&&(Le(e-1)(t),!0)}).catch(t=>!!/already exists/.test(t.get_message()))}class Ke extends se{constructor(t){super(t,We,ze),this.joinProp="ServerRelativeUrl"}getCount(){return this.isArray?zt(this.value).length:Ht(this.value[this.prop])?1:0}}var Qe=Y(class{constructor(t,e){this.name="file",this.parent=t,this.box=Y(Ke)(e),this.count=this.box.getCount(),this.contextUrl=t.parent.box.getHeadPropValue(),this.listUrl=t.box.getHeadPropValue(),this.getContextSPObject=t.parent.getSPObject.bind(t.parent),this.getListSPObject=t.getSPObject.bind(t),this.iterator=oe({contextUrl:this.contextUrl,elementBox:this.box}),this.iteratorREST=ae({elementBox:this.box})}async get(t={}){const{contextUrl:e,listUrl:r}=this;if(t.asBlob){const i=await this.iteratorREST(({element:t})=>{const i=ie(e)(r)(t);return be(e,{url:`${this.getRESTObject(i,r,e)}/$value`,binaryStringResponseBody:!0})});return fe(i,t)}const i=t.asItem?{...t,view:["ListItemAllFields"]}:{...t},{clientContexts:n,result:s}=await this.iterator(({clientContext:t,element:n})=>{const s=ie(e)(r)(n),o=this.getListSPObject(r,this.getContextSPObject(t)),a=Ot(s)&&Vt(s)?this.getSPObjectCollection(s,o):this.getSPObject(s,o);return ge(t,a,i)});return await Promise.all(n.map(e=>me(e,t))),de(s,i)}async create(t={}){const{contextUrl:e,listUrl:r}=this;if(!Fe(["listGUIDs",e,r])){const t=await this.parent.of(r).get({view:"Id"});Le(t.Id.toString())(["listGUIDs",e,r])}if(!Fe(["listFormMatches",e,r])){const t=await s.a.get(`/${e}/_layouts/15/Upload.aspx?List={${Fe(["listGUIDs",e,r])}}`);Le(t.data.match(/<form(\w|\W)*<\/form>/))(["listFormMatches",e,r])}const i=["fileCreationRetries",this.parent.parent.id];wt(Fe(i))||Le(u)(i);const n=await this.iteratorREST(({element:i})=>{const n=ie(e)(r)(i);if(Ht(n)||!i.Content||i.Content.name)return pt(i.Content)?async function t(e,r={}){let i,n;const o=[],{needResponse:a,silent:l,silentErrors:c}=r,{Content:u="",Overwrite:h,OnProgress:d=y,Folder:f="",Columns:p}=e,{contextUrl:g,listUrl:m}=this,b=ie(g)(m)(e),_=f||te(b),v=b?ee(b):u.name,x={__REQUESTDIGEST:!0,__VIEWSTATE:!0,__EVENTTARGET:!0,__EVENTVALIDATION:!0,ctl00_PlaceHolderMain_ctl04_ctl01_uploadLocation:!0,ctl00_PlaceHolderMain_UploadDocumentSection_ctl05_OverwriteSingle:!0},w=Fe(["listGUIDs",g,m]),S=Fe(["listFormMatches",g,m]),C=/<input[^<]*\/>/g;let U=C.exec(S);for(;U;){const t=U[0],e=t.match(/id="([^"]+)"/)[1];if(x[e])switch(e){case"__EVENTTARGET":o.push(t.replace(/value="[^"]*"/,'value="ctl00$PlaceHolderMain$ctl03$RptControls$btnOK"'));break;case"ctl00_PlaceHolderMain_ctl04_ctl01_uploadLocation":o.push(t.replace(/value="[^"]*"/,`value="/${_.replace(/^\//,"")}"`));break;case"ctl00_PlaceHolderMain_UploadDocumentSection_ctl05_OverwriteSingle":o.push(h?t:t.replace(/checked="[^"]*"/,""));break;default:o.push(t)}U=C.exec(S)}const P=window.document.createElement("form");P.innerHTML=A("")(o);const O=new FormData(P);O.append("ctl00$PlaceHolderMain$UploadDocumentSection$ctl05$InputFile",u,v);const T=await s()({url:`/${g}/_layouts/15/UploadEx.aspx?List={${w}}`,method:"POST",data:O,onUploadProgress:t=>d(Math.floor(100*t.loaded/t.total))}),k=T.data.match(/id="ctl00_PlaceHolderMain_LabelMessage">([^<]*)<\/span>/);if(!dt(k)||l||c||console.error(k[1]),j(/The selected location does not exist in this document library\./i)(T.data)&&(i=!0,n=await qe.call(this)),n)return t.call(this,e,r);if(i)throw new Error(`can't create file "${b}" at ${g}/${m}`);{let t;return jt(p)?t=await this.of({Url:b,Columns:p}).update({...r,silentInfo:!0}):a&&(t=await this.of({Url:b}).get(r)),t}}.call(this,i,t):async function t(e,r={}){let i,n;const{needResponse:o}=r,{Content:a="",Overwrite:l=!0,Columns:c}=e,{contextUrl:u,listUrl:h}=this,d=ie(u)(h)(e),f=ee(d),p=this.getRESTObjectCollection(d,h,u);if(await s()({url:`${p}/add(url='${f}',overwrite=${l})`,headers:{accept:"application/json;odata=verbose","content-type":"application/json;odata=verbose","X-RequestDigest":await je()},method:"POST",data:a}).catch(async t=>{n=!0,"Not Found"===t.response.statusText&&(i=await qe.call(this))}),i)return t.call(this,e,r);if(n)throw new Error(`can't create file "${e.Url}" at ${u}/${h}`);{let t;return c?t=this.of({Url:d,Columns:c}).update({...r,silentInfo:!0}):o&&(t=this.of(d).get(r)),t}}.call(this,i,t)});return this.report("create",t),n}async update(t={}){const{contextUrl:e,listUrl:r}=this,i=t.asItem?{...t,view:["ListItemAllFields"]}:{...t};await this.cacheColumns();const{clientContexts:n,result:s}=await this.iterator(({clientContext:t,element:n})=>{const{Content:s,Columns:o}=n,a=ie(e)(r)(n);if(!Ht(a))return;const l=this.getContextSPObject(t),c=this.getListSPObject(r,l);let u;if(bt(s))u=we(Fe(["columns",e,r]))(Object.assign({},o))(this.getSPObject(a,c).get_listItemAllFields());else{const t={},e=Reflect.ownKeys(o);for(let r=0;r<e.length;r+=1){const i=e[r],n=o[i];t[i]=w(dt)([A(";#;#")])(n)}const r=tt(SP.FileSaveBinaryInformation);Pe({set_content:_e(s),set_fieldValues:t})(r),(u=this.getSPObject(a,c)).saveBinary(r),u=u.get_listItemAllFields()}return ge(t,u.get_file(),i)});return this.count&&await Promise.all(n.map(t=>me(t,i))),this.report("update",i),de(s,i)}async delete(t={}){const{contextUrl:e,listUrl:r}=this,{noRecycle:i}=t,{clientContexts:n,result:s}=await this.iterator(({clientContext:t,element:n})=>{const s=ie(e)(r)(n);if(!Ht(s))return;const o=this.getListSPObject(r,this.getContextSPObject(t)),a=this.getSPObject(s,o);return K(i?"deleteObject":"recycle")(a),s});return this.count&&await Promise.all(n.map(e=>me(e,t))),this.report(i?"delete":"recycle",t),de(s,t)}async copy(t){return Ne.call(this,!1,t)}async move(t){return Ne.call(this,!0,t)}getSPObject(t,e){const r=ee(t),i=te(t);return i?xe(i)(e.get_rootFolder()).get_files().getByUrl(r):e.get_rootFolder().get_files().getByUrl(r)}getSPObjectCollection(t,e){const r=te(Kt(t));return r?xe(r)(e.get_rootFolder()).get_files():e.get_rootFolder().get_files()}getRESTObject(t,e,r){let i=t;return/\'/.test(t)&&(i=i.replace(/\'/,"%27%27")),Gt(`${this.getRESTObjectCollection(t,e,r)}/getbyurl('${ee(i)}')`)}getRESTObjectCollection(t,e,r){const i=te(t);let n="";return i&&(n=Gt(i).split("/").reduce((t,e)=>t+=`/folders/getbyurl('${e}')`,"")),Gt(`/${r}/_api/web/lists/getbytitle('${e}')/rootfolder${n}/files`)}report(t,e={}){Lt(t,{...e,name:this.name,box:this.box,listUrl:this.listUrl,contextUrl:this.contextUrl})}async cacheColumns(){const{contextUrl:t,listUrl:e}=this;if(!Fe(["columns",t,e])){const r=await this.parent.column().get({view:["TypeAsString","InternalName","Title","Sealed"],mapBy:"InternalName"});Le(r)(["columns",t,e])}}of(t){return Y(this.constructor)(this.parent,t)}});const Ge=new RegExp("\\s(&&||||and|or)\\s","i"),Xe=new RegExp("\\((.*\\s(&&||||and|or)\\s.*)\\)","i"),Je=/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d\d\d)?Z$/,Ze={AppAuthor:"lookup",AppEditor:"lookup",Attachments:"attachments",Author:"lookup",BaseName:"computed",ContentType:"computed",ContentTypeId:"contentTypeId",Created:"dateTime",Created_x0020_Date:"lookup",DocIcon:"computed",Edit:"computed",Editor:"lookup",EncodedAbsUrl:"computed",FSObjType:"number",FileDirRef:"lookup",FileLeafRef:"file",FileRef:"file",File_x0020_Type:"text",FolderChildCount:"number",GUID:"guid",HTML_x0020_Type:"computed",ID:"counter",InstanceID:"integer",ItemChildCount:"number",Last_x0020_Modified:"lookup",LinkFilename:"computed",LinkFilename2:"computed",LinkFilenameNoMenu:"computed",LinkTitle:"computed",LinkTitle2:"computed",LinkTitleNoMenu:"computed",MetaInfo:"lookup",Modified:"dateTime",Order:"number",PermMask:"computed",ProgId:"lookup",ScopeId:"lookup",SelectTitle:"computed",ServerUrl:"computed",SortBehavior:"lookup",SyncClientId:"lookup",Title:"text",UniqueId:"lookup",WorkflowInstanceID:"guid",WorkflowVersion:"integer",_CopySource:"text",_EditMenuTableEnd:"computed",_EditMenuTableStart:"computed",_EditMenuTableStart2:"computed",_HasCopyDestinations:"Boolean",_IsCurrentVersion:"Boolean",_Level:"integer",_ModerationComments:"note",_ModerationStatus:"modStat",_UIVersion:"integer",_UIVersionString:"text"},Ye=/(Text|Note|Number|Integer|Counter|Boolean|Lookup|User|DateTime|Date|Time|Computed|Currency|ModStat|Guid|File|Attachments|LookupMulti|UserMulti)\s/i,tr=/\s(eq|neq|geq|leq|gt|lt|isnull|isnotnull|contains|beginsWith|includes|notincludes|search|in|membership)(\s|$)/i,er={text:"Text",note:"Text",number:"Number",integer:"Text",counter:"Text",boolean:"Boolean",lookup:"Lookup",user:"Text",datetime:"Text",date:"Text",time:"Text",currency:"Text",computed:"Text",lookupmulti:"Lookup",usermulti:"Text",modstat:"ModStat",guid:"Guid",file:"File",attachments:"Attachments"},rr={eq:"Eq",neq:"Neq",geq:"Geq",leq:"Leq",gt:"Gt",lt:"Lt",isnull:"IsNull",isnotnull:"IsNotNull",beginswith:"BeginsWith",contains:"Contains",includes:"Includes",notincludes:"NotIncludes",in:"In",membership:"Membership",search:"Search"},ir={user:"SPWeb.Users",users:"SPWeb.AllUsers",group:"CurrentUserGroups",groups:"SPWeb.Groups"},nr={"&&":"And","||":"Or"},sr=t=>nr[t]||(/^and$/i.test(t)?"And":"Or"),or=t=>{const e=t.match(new RegExp(`^[^\\(]*\\((.*${Ge.test(t)?"\\s(&&||||and|or)\\s.*":""})\\)[^\\)]*$`,"i"));return e&&e[1]?e[1]:t},ar=(t="")=>{if("("===t[0]&&")"===t.substr(-1)){const e=T(/\(/g)(t).length;if(e!==T(/\)/g)(t).length)throw new Error("query has wrong braces");return e>=T(new RegExp("\\s(&&||||and|or)\\s","ig"))(t).length?or(t):t}return t},lr=t=>{let e,r,i,n="",s="";const o=t.match(tr);if(!o)throw new SyntaxError(`Wrong operator in "${t}"`);[r]=o,e=o[1].toLowerCase();const a=rr[e],l=t.split(new RegExp(r,"i"));let c=l[0].replace(/\s\s+/g," ").trim();if(Ye.test(c)){const t=c.split(" ");i=t.shift().toLowerCase(),c=t.join(" ")}else i=Ze[c]||"text";let u=l[1];switch(i){case"datetime":case"time":case"date":s='StorageTZ="True"',"date"!==i&&(s+=' IncludeTimeValue="True"'),u=new Date(u).toISOString();break;case"text":Je.test(u)&&(s='StorageTZ="True"');break;case"boolean":u=/^(true|yes|1)$/.test(u)?"1":"0";break;case"lookup":case"lookupmulti":n=' LookupId="True"'}const h=er[i];switch("text"!==i&&(u=u.trim()),e){case"in":{const t=[],e=[];u=u.split(u.indexOf("_DELIMITER_")>=0?"_DELIMITER_":",");for(let e=0;e<u.length;e+=1){const r=u[e];t.push(`<Value Type="${h}"${s}>${cr(r)}</Value>`)}if(u.length>500){const r=z(500)(t);for(let t=r.length-1;t>=0;t-=1)e.push(`<In><FieldRef Name="${c}"${n}/><Values>${r[t].join("")}</Values></In>`);let i='<IsNull><FieldRef Name="ID"/></IsNull>';for(let t=0;t<e.length;t+=1){i=`<Or>${e[t]}${i}</Or>`}return i}return`<In><FieldRef Name="${c}"${n}/><Values>${t.join("")}</Values></In>`}case"search":return nt([O(/\s+/g)(" "),I,B(" "),$(t=>`${i} ${c} contains ${t}`),pr(),ur])(u);case"membership":return`<${a} Type="${ir[u.toLowerCase()]}"><FieldRef Name="${c}"/></${a}>`}const d=/null/.test(e)?"":`<Value Type="${h}"${s}>${cr(u)}</Value>`;return`<${a}><FieldRef Name="${c}"${n}/>${d}</${a}>`},cr=t=>/^"[^"]*"$/.test(t)?t.slice(1,-1):t,ur=t=>{let e,r,i,n="",s=!1,o=!1,a=0;if(Xe.test(t)){let e=0;for(let r=0;r<t.length;r+=1){const i=t[r];"("===i?(a||(s=!0),e+=1):")"===i?(a&&(o=!0),e-=1):e||(n=n.concat(i),a||(a=r))}}if(n&&s&&o)i=n.trim(),e=ar(t.slice(0,a)),r=ar(t.slice(a+n.length));else{const n=ar(t).match(Xe);if(n){const s="_dummy_",o=new RegExp(s),a=n[1],l=t.replace(a,s).split(Ge),c=l[0];if(3!==l.length)return lr(c);{[,i]=l;const t=l[2];o.test(c)?(e=or(c.replace(s,a)),r=t):o.test(t)&&(e=c,r=or(t.replace(s,a)))}}else{const n=t.split(Ge);if([e]=n,3!==n.length)return lr(e);[,,r]=n,[,i]=n}}const l=sr(i);return`<${l}>${ur(e)}${ur(r)}</${l}>`},hr=t=>{switch(p(t)){case"number":return hr(`ID eq ${t}`);case"object":return dr(t);case"string":if(t){if(t===(+t).toString())return hr(`ID eq ${t}`);if(j(/\s/)(t)&&B(/\s/)(t).length>1){const e=ar(t.replace(/\s{2,}/g," ").replace(/^\s|\s$/g,""));if(B(/\s/)(e).length>1)return/^<|>$/.test(e)?t:Ge.test(e)?ur(e):lr(e)}}return"";default:return""}},dr=(t={})=>{let e,r="",i="";const{OrderBy:n,Scope:s,Limit:o}=t;let{Query:a=""}=t;if(ft(t)||(a=t),n){e=E(n);for(let t=0;t<e.length;t+=1){const i=e[t];r+=`<FieldRef Name="${i.split(">")[0]}"${/>/.test(i)?' Ascending="FALSE"':""}/>`}r=`<OrderBy>${r}</OrderBy>`}s&&(i=/allItems/i.test(s)?' Scope="Recursive"':/^items$/i.test(s)?' Scope="FilesOnly"':/^all$/i.test(s)?' Scope="RecursiveAll"':"");const l=a?`<Where>${hr(a)}</Where>`:"";return`<View${i}>${l||r?`<Query>${l}${r}</Query>`:""}${`<RowLimit>${o||16e4}</RowLimit>`}</View>`},fr=({joiner:t="||",operator:e=(void 0===i?"isnotnull":"eq"),columns:r,values:i})=>{const n=sr(t),s=E(r),o=E(i);let a="And"===n?`ID ${rr.isnotnull}`:`ID ${rr.isnull}`;if(o.length)for(let t=s.length-1;t>=0;t-=1)for(let r=o.length-1;r>=0;r-=1)a=`(${s[t]} ${`${e} ${o[r]}`} ${n} ${a})`;else for(let t=s.length-1;t>=0;t-=1)a=`(${s[t]} ${e} ${n} ${a})`;return ar(a)},pr=(t="||")=>(e=[])=>D(((t="||")=>e=>r=>{const i=sr(t),n="And"===i?`ID ${rr.isnotnull}`:`ID ${rr.isnull}`;if(e){const t=ar(e);if(r){const e=ar(r);return Ge.test(t)?Ge.test(e)?`(${t}) ${i} (${e})`:`(${t}) ${i} ${e}`:Ge.test(e)?`${t} ${i} (${e})`:`${t} ${i} ${e}`}return Ge.test(t)?`(${t}) ${i} ${n}`:`${t} ${i} ${n}`}if(r){const t=ar(r);return Ge.test(t)?`${n} ${i} (${t})`:`${n} ${i} ${t}`}return`(${n}) ${i} ${n}`})(t))((t=>t[0])(e))((([,...t])=>t)(e)),gr=t=>console.log(t&&DOMParser?(new DOMParser).parseFromString(t,"text/xml"):t),mr=S(p)({object:t=>Object.assign({},t),string:(t="")=>({Url:t}),default:()=>({Url:"/"})});var yr=Y(class{constructor(t,e){this.name="attachment",this.parent=t,this.box=Y(se)(e,mr),this.listProp=t.parent.box.getHeadPropValue(),this.item=t.box.getHead(),this.getItemSPObject=t.getSPObject.bind(t),this.getListSPObject=t.parent.getSPObject.bind(t.parent),this.getContextSPObject=t.parent.parent.getSPObject.bind(t.parent.parent),this.iterator=oe({contextUrl:t.parent.contextUrl,elementBox:this.box})}async get(t={}){const{clientContexts:e,result:r}=await this.iterator(({clientContext:e,element:r})=>{const i=this.getContextSPObject(e),n=this.getListSPObject(this.listProp,i),s=this.getItemSPObject(this.item,n),o=this.getSPObject(r,s);return ge(e,o,t)});return await Promise.all(e.map(e=>me(e,t))),de(r,t)}getSPObject(t,e){const r=t.Url,i=e.get_attachmentFiles();return r&&"/"!==r?i.getByFileName(r):i}});const br="ID",_r=(t,e)=>(r,i)=>{let n=new SP.CamlQuery;const{ID:s}=r,o=i.get_context().get_url();switch(p(s)){case"number":return i.getItemById(s);case"string":Vt(s)?n.set_folderServerRelativeUrl(`${o}/${Kt(s)}`):n.set_viewXml(dr(s));break;default:if(r.set_viewXml)n=r;else{if(r.get_lookupId){return i.getItemById(r.get_lookupId())}{const{Folder:s,Page:a}=r;if(s){let r="";const a=`${t}${e}/${s}`;if("/"===o)r=a;else{r=new RegExp(i.get_context().get_url(),"i").test(s)?s:a}n.set_folderServerRelativeUrl(r)}if(n.set_viewXml(dr(r)),a){const{IsPrevious:t,ID:e,Columns:r}=a;if(e){const i=tt(SP.ListItemCollectionPosition);i.set_pagingInfo(`${t?"PagedPrev=TRUE&":""}Paged=TRUE&p_ID=${e}${(t=>{if(!t)return"";let e="";const r=Reflect.ownKeys(t);for(let i=0;i<r.length;i+=1){const n=r[i],s=t[n];let o=s;switch(p(s)){case"object":s.get_lookupValue&&(o=s.get_lookupValue());break;case"date":o=s.toISOString();break;case"boolean":o=s?1:0}"ID"!==s&&void 0!==s&&(e+=`&p_${n}=${encodeURIComponent(o)}`)}return e})(r)}`),n.set_listItemCollectionPosition(i)}}}}}const a=i.getItems(n);return a.camlQuery=n,a},vr=S(p)({object:t=>Object.assign({},t),string:(t="")=>({[br]:t}),number:t=>({[br]:t}),default:()=>({[br]:void 0})}),xr=t=>{let e;return t.Columns?e=Object.assign({},t.Columns):(delete(e=Object.assign({},t)).Folder,delete e[br]),!!Object.keys(e).length};class wr extends se{constructor(t){super(t,vr),this.prop=br,this.joinProp=br}getCount(t){return this.isArray?"create"===t?this.value.filter(xr).length:this.value.length:"create"===t?xr(this.value)?1:0:1}}var Sr=Y(class{constructor(t,e){this.name="item",this.parent=t,this.box=Y(wr)(e),this.contextUrl=t.parent.box.getHeadPropValue(),this.listUrl=t.box.getHeadPropValue(),this.getSPObject=_r("list"===t.name?"Lists/":"",this.listUrl),this.getContextSPObject=t.parent.getSPObject.bind(t.parent),this.getListSPObject=t.getSPObject.bind(t),this.iterator=oe({contextUrl:t.contextUrl,elementBox:this.box})}async get(t={}){const{showCaml:e}=t,{clientContexts:r,result:i}=await this.iterator(({clientContext:r,element:i})=>{const n=this.getContextSPObject(r),s=this.getListSPObject(this.listUrl,n),o=this.getSPObject(i,s);return e&&o.camlQuery&&gr(o.camlQuery.get_viewXml()),ge(r,o,t)});return await Promise.all(r.map(e=>me(e,t))),de(i,t)}async create(t={}){if("list"!==this.parent.name)throw new Error('There is no "create" method in "item" module. Use "file" module instead of "item".');const{contextUrl:e,listUrl:r}=this;await this.cacheColumns();const i=["itemCreationRetries",this.parent.parent.id];wt(Fe(i))||Le(u)(i);const{clientContexts:n,result:s}=await this.iterator(({clientContext:i,element:n})=>{const s=tt(SP.ListItemCreationInformation),o=this.getContextSPObject(i),a=this.getListSPObject(r,o),{Folder:l,Columns:c}=n;let u,h=l;if(jt(c)?(c.Folder&&(h=c.Folder),u={...c}):(delete(u={...n})[br],delete u.Folder),!jt(u))return;if(h){const t=ie(e)(r)({Folder:h});s.set_folderUrl(`/${e}/Lists/${r}/${t}`)}const d=we(Fe(["columns",e,r]))(u)(a.addItem(s));return ge(i,d,t)});let o,a;if(this.box.getCount())for(let e=0;e<n.length;e+=1){const r=n[e];if(await me(r,{...t,silentErrors:!0}).catch(async t=>{if(!/There is no file with URL/.test(t.get_message()))throw t;{const t={};await this.iterator(({element:e})=>{const{Folder:r,Columns:i={}}=e,n=ie(this.contextUrl)(this.listUrl)({Folder:r||i.Folder});t[n]=!0}),await this.parent.folder(Object.keys(t)).create({expanded:!0,view:["Name"]}).then(()=>{const t=Fe(i);return!!t&&(Le(t-1)(i),!0)}).catch(t=>(console.log(t),!!/already exists/.test(t.get_message())))&&(o=!0)}a=!0}),o)break}return o?this.create(t):a?void 0:(this.report("create",t),de(s,t))}async update(t){const{contextUrl:e,listUrl:r}=this;await this.cacheColumns();const{clientContexts:i,result:n}=await this.iterator(({clientContext:i,element:n})=>{if(!n[br])return;const s=this.getContextSPObject(i),o=this.getListSPObject(r,s),a=Object.assign({},n);delete a[br];const l=we(Fe(["columns",e,r]))(a)(this.getSPObject(n,o));return ge(i,l,t)});return Tt(n)&&await Promise.all(i.map(e=>me(e,t))),this.report("update",t),de(n,t)}async updateByQuery(t){const{result:e}=await this.iterator(async({element:e})=>{const{Folder:r,Query:i,Columns:n={}}=e;if(void 0===i)throw new Error("Query is missed");const s=await this.of({Folder:r,Query:i}).get({...t,expanded:!1});if(s.length){const e=s.map(t=>{const e={...n};return e[br]=t[br],e});return this.of(e).update(t)}});return e}async delete(t={}){const{noRecycle:e,isSerial:r}=t,{clientContexts:i,result:n}=await this.iterator(({clientContext:t,element:r})=>{const i=r[br];if(!i)return;const n=this.getContextSPObject(t),s=this.getListSPObject(this.listUrl,n),o=this.getSPObject(r,s);return o.isRoot||K(e?"deleteObject":"recycle")(o),i});if(this.box.getCount())if(r)for(let e=0;e<i.length;e+=1)await me(i[e])(t);else await Promise.all(i.map(e=>me(e,t)));return this.report(e?"delete":"recycle",t),de(n,t)}async deleteByQuery(t){const{result:e}=await this.iterator(async({element:e})=>{if(void 0===e)throw new Error("Query is missed");const r=await this.of(e).get(t);if(r.length)return await this.of(r.map(J("ID"))).delete({isSerial:!0}),r});return e}async getDuplicates(){const t=await this.of({Scope:"allItems",Limit:o}).get({view:["ID","FSObjType","Modified",...this.box.join()]}),e=new Map,r=t=>{const e=[];return this.box.chain(r=>{const i=t[r[br]];_t(i)&&e.push(i.get_lookupId?i.get_lookupId():i)}),Object(i.MD5)(e.join(".")).toString()};for(let i=0;i<t.length;i+=1){const n=t[i],s=r(n);void 0!==s&&(e.has(s)||e.set(s,[]),e.get(s).push(n))}let n=[];for(let t=0;t<e.length;t+=1){const[,r]=e[t];r.length>1&&(n=n.concat([r.sort((t,e)=>t.Modified.getTime()-e.Modified.getTime())]))}return n.map(H)}async deleteDuplicates(t={}){const e=await this.getDuplicates();await this.of([...e.reduce((t,e)=>t.concat(e.map(J("ID"))),[])]).delete({...t,isSerial:!0})}async getEmpties(t){const e=this.box.value.map(J("ID")),{result:r}=await this.iterator(async({element:r})=>this.of({Query:fr({operator:"isnull",columns:e}),Scope:"allItems",Limit:o,Folder:r.Folder}).get(t));return r}async deleteEmpties(t){const e=this.box.value.map(J("ID")),{result:r}=await this.of(await this.of(e).getEmpties(t)).map(J("ID")).delete({isSerial:!0});return r}async merge(t){const{contextUrl:e,listUrl:r}=this;this.iterator(async({element:i})=>{const{Key:n,Forced:s,To:a,From:l,Mediator:c=(()=>y)}=i;if(!n)throw new Error("Key is missed");const u=l.Column;if(!u)throw new Error("From Column is missed");const h=a.Column;if(!h)throw new Error("To Column is missed");const[d,f]=await Promise.all([this.parent.parent.of(l.WebUrl||e)[this.parent.name](l.List||r).item({Query:pr()([`${n} IsNotNull`,l.Query]),Scope:"allItems",Limit:o}).get({view:["ID",n,u]}),this.of({Query:pr()([`${n} IsNotNull`,a.Query]),Scope:"allItems",Limit:o}).get({view:["ID",n,h],groupBy:n})]),p=[];return await Promise.all(d.map(async t=>{const e=f[t[n]];if(e){const r=e[0],i={ID:r[br]};(mt(r[h])||s)&&(i[h]=await c(u)(t[u]),p.push(i))}})),p.length&&this.of(p).update(t)})}async erase(t){const{result:e}=await this.iterator(({element:e})=>{const{Query:r="",Folder:i,Columns:n}=e;if(!n)return;const s=E(n);return this.of({Folder:i,Query:r,Columns:s.reduce((t,e)=>(t[e]=null,t),{})}).updateByQuery(t)});return de(e,t)}async createDiscussion(t={}){const{clientContexts:e,result:r}=await this.iterator(({clientContext:t,element:e})=>{const r=this.getContextSPObject(t),i=this.getListSPObject(this.listUrl,r),n={Url:!0,ID:!0},s=SP.Utilities.Utility.createNewDiscussion(t,i,e.Title),o=Reflect.ownKeys(e);for(let t=0;t<o.length;t+=1){const r=o[t];n[r]||s.set_item(r,e[r])}return s.update(),s});return await Promise.all(e.map(e=>me(e,t))),this.report("create",t),de(t,r)}async createReply(t={}){const{clientContexts:e,result:r}=await this.iterator(({clientContext:t,element:e})=>{const{Columns:r}=e,i=this.getContextSPObject(t),n=this.getListSPObject(this.listUrl,i),s=this.getSPObject(e,n),o=SP.Utilities.Utility.createNewDiscussionReply(t,s),a=Reflect.ownKeys(r);for(let t=0;t<a.length;t+=1){const e=a[t];o.set_item(e,r[e])}return o.update(),o});return await Promise.all(e.map(e=>me(e,t))),this.report("create",t),de(r,t)}attachment(t){return yr(this,t)}report(t,e={}){Lt(t,{...e,name:this.name,box:this.box,listUrl:this.listUrl,contextUrl:this.contextUrl})}async cacheColumns(){const{contextUrl:t,listUrl:e}=this;if(!Fe(["columns",t,e])){const r=await this.parent.column().get({view:["TypeAsString","InternalName","Title","Sealed"],mapBy:"InternalName"});Le(r)(["columns",t,e])}}of(t){return Y(this.constructor)(this.parent,t)}});const Cr="Title",Ur=nt([Nt,Wt]),Pr=S(p)({object:t=>{const e=Object.assign({},t);t.Url||(e.Url=t.EntityTypeName||t[Cr]);const r=Qt(t.Url);return t.EntityTypeName||(e.EntityTypeName=r),t[Cr]||(e[Cr]=t.EntityTypeName||r),e},string:(t="/")=>({Url:t,Title:"/"===t?"/":Qt(Gt(t))}),default:()=>({Url:"/",Title:"/"})});class jr{constructor(t,e){this.name="list",this.parent=t,this.contextUrl=t.box.getHeadPropValue(),this.box=Y(se)(e,Pr,Ur),this.count=t.box.getCount(),this.web=t.constructor,this.getContextSPObject=t.getSPObject,this.iterator=oe({contextUrl:this.contextUrl,elementBox:this.box})}async get(t){const{clientContexts:e,result:r}=await this.iterator(({clientContext:e,element:r})=>{const i=this.parent.getSPObject(e),n=r.Title,s=Vt(n)?this.getSPObjectCollection(i):this.getSPObject(n,i);return ge(e,s,t)});return await Promise.all(e.map(e=>me(e,t))),de(r,t)}async create(t){const{clientContexts:e,result:r}=await this.iterator(({clientContext:e,element:r})=>{const i=r[Cr];if(!re(i))return;const n=this.parent.getSPObject(e),s=nt([tt,Pe({set_title:i,set_templateType:r.BaseTemplate||SP.ListTemplateType[r.TemplateType||"genericList"],set_url:r.Url,set_templateFeatureId:r.TemplateFeatureId,set_customSchemaXml:r.CustomSchemaXml,set_dataSourceProperties:r.DataSourceProperties,set_documentTemplateType:r.DocumentTemplateType,set_quickLaunchOption:r.QuickLaunchOption}),G("add")(this.getSPObjectCollection(n)),x(Pe({set_contentTypesEnabled:r.ContentTypesEnabled,set_defaultContentApprovalWorkflowId:r.DefaultContentApprovalWorkflowId,set_defaultDisplayFormUrl:r.DefaultDisplayFormUrl,set_defaultEditFormUrl:r.DefaultEditFormUrl,set_defaultNewFormUrl:r.DefaultNewFormUrl,set_description:r.Description,set_direction:r.Direction,set_draftVersionVisibility:r.DraftVersionVisibility,set_enableAttachments:r.EnableAttachments||!1,set_enableFolderCreation:void 0===r.EnableFolderCreation||r.EnableFolderCreation,set_enableMinorVersions:r.EnableMinorVersions,set_enableModeration:r.EnableModeration,set_enableVersioning:void 0===r.EnableVersioning||r.EnableVersioning,set_forceCheckout:r.ForceCheckout,set_hidden:r.Hidden,set_imageUrl:r.ImageUrl,set_irmEnabled:r.IrmEnabled,set_irmExpire:r.IrmExpire,set_irmReject:r.IrmReject,set_isApplicationList:r.IsApplicationList,set_lastItemModifiedDate:r.LastItemModifiedDate,set_majorVersionLimit:r.EnableVersioning?r.MajorVersionLimit:void 0,set_multipleDataList:r.MultipleDataList,set_noCrawl:void 0===r.NoCrawl||r.NoCrawl,set_objectVersion:r.ObjectVersion,set_onQuickLaunch:r.OnQuickLaunch,set_validationFormula:r.ValidationFormula,set_validationMessage:r.ValidationMessage})),x(w(b(!r.BaseTemplate&&!d[r.TemplateType]))([Pe({set_documentTemplateUrl:r.DocumentTemplateUrl,MajorWithMinorVersionsLimit:r.EnableVersioning?r.MajorWithMinorVersionsLimit:void 0})])),x(K("update"))])(SP.ListCreationInformation);return ge(e,s,t)});if(this.count)for(let r=0;r<e.length;r+=1)await me(e[r],t);return this.report("create",t),de(r,t)}async update(t){const{clientContexts:e,result:r}=await this.iterator(({clientContext:e,element:r})=>{const i=r[Cr];if(!re(i))return;const n=this.parent.getSPObject(e),s=nt([Pe({set_title:i,set_enableFolderCreation:r.EnableFolderCreation,set_contentTypesEnabled:r.ContentTypesEnabled,set_defaultContentApprovalWorkflowId:r.DefaultContentApprovalWorkflowId,set_defaultDisplayFormUrl:r.DefaultDisplayFormUrl,set_defaultEditFormUrl:r.DefaultEditFormUrl,set_defaultNewFormUrl:r.DefaultNewFormUrl,set_description:r.Description,set_direction:r.Direction,set_draftVersionVisibility:r.DraftVersionVisibility,set_documentTemplateUrl:r.DocumentTemplateUrl,set_enableAttachments:r.EnableAttachments,set_enableMinorVersions:r.EnableMinorVersions,set_enableModeration:r.EnableModeration,set_enableVersioning:r.EnableVersioning,set_forceCheckout:r.ForceCheckout,set_hidden:r.Hidden,set_imageUrl:r.ImageUrl,set_irmEnabled:r.IrmEnabled,set_irmExpire:r.IrmExpire,set_irmReject:r.IrmReject,set_isApplicationList:r.IsApplicationList,set_lastItemModifiedDate:r.LastItemModifiedDate,set_majorVersionLimit:r.MajorVersionLimit,set_majorWithMinorVersionsLimit:r.MajorWithMinorVersionsLimit,set_multipleDataList:r.MultipleDataList,set_noCrawl:r.NoCrawl,set_objectVersion:r.ObjectVersion,set_onQuickLaunch:r.OnQuickLaunch,set_validationFormula:r.ValidationFormula,set_validationMessage:r.ValidationMessage}),x(K("update"))])(this.getSPObject(r.Url,n));return ge(e,s,t)});return this.count&&await Promise.all(e.map(e=>me(e,t))),this.report("update",t),de(r,t)}async delete(t={}){const{noRecycle:e}=t,{clientContexts:r,result:i}=await this.iterator(({clientContext:t,element:r})=>{const i=r[Cr];if(!re(i))return;const n=this.parent.getSPObject(t),s=this.getSPObject(i,n);return K(e?"deleteObject":"recycle")(s),i});return this.count&&await Promise.all(r.map(e=>me(e,t))),this.report(e?"delete":"recycle",t),de(i,t)}async cloneLayout(){console.log("cloning layout in progress..."),await this.iterator(async({contextElement:t,element:e})=>{let r;const i=t.Url;let n=i;const{Title:s,Url:o,To:a}=e;ht(a)?(n=i,r=a):(n=a.WebUrl||i,r=a.ListUrl);const l=o||s;if(!r)throw new Error("Target listUrl is missed");if(!l)throw new Error("Source list Title is missed");const c=Jt(r),u=this.web(n),h=this.web(i),d=u.list(r),f=h.list(l);await d.get({silent:!0}).catch(async()=>{const t=Object.assign({},await f.get());t.Title=c,t.Url=c,await u.list(t).create()});const[p,g]=await Promise.all([f.column().get(),d.column().get({groupBy:"InternalName"})]),m=p.reduce((t,e)=>{return g[e.InternalName]||e.FromBaseType||t.push(Object.assign({},e)),t},[]);return m.length?d.column(m).create():void 0}),console.log("cloning layout done!")}async clone(t){const e={Attachments:!0,MetaInfo:!0,FileLeafRef:!0,FileDirRef:!0,FileRef:!0,Order:!0};console.log("cloning in progress..."),await this.iterator(async({contextElement:r,element:i})=>{const n=r.Url;let s,o;const{Title:a,To:l,Url:c}=i;ht(l)?(s=n,o=l):(s=l.WebUrl,o=l.ListUrl);const u=a||c;if(!s)throw new Error("Target webUrl is missed");if(!o)throw new Error("Target listUrl is missed");if(!u)throw new Error("Source list Title is missed");const h=l.Title||Jt(o),d=this.web(s),f=this.web(n),p=d.list(h),g=f.list(u);await f.list(i).cloneLayout(),console.log("cloning items...");const[m,y,b]=await Promise.all([g.get(),g.column().get({groupBy:"InternalName",view:["ReadOnlyField","InternalName"]}),g.item({Query:"",Scope:"allItems"}).get()]);if(!m.BaseType){const t=b.map(t=>{const r={},i=ie(n)(u)({Url:t.FileDirRef});i&&(r.Folder=i);const s=Reflect.ownKeys(t);for(let i=0;i<s.length;i+=1){const n=s[i],o=t[n],a=y[n];if(a){a[0].ReadOnlyField||e[n]||!Ot(o)||(r[n]=o)}}return r});return p.item(t).create()}for(let e=0;e<b.length;e+=1){const r=b[e];await f.library(u).file({Url:ie(n)(u)({Url:r.FileRef}),To:{WebUrl:s,ListUrl:o}}).copy(t)}}),console.log("cloning is complete!")}async clear(t){console.log("clearing in progress..."),await this.item({Query:""}).deleteByQuery(t),console.log("clearing is complete!")}async getAggregations(t){return this.iterator(async({contextElement:e,element:r})=>{const i=e.Url;let n="",s="",o="";const a={},{Title:l,Columns:c,Scope:u="all",Query:h}=r,d=ce(i),f=this.getSPObject(l,this.parent.getSPObject(d)),p=Reflect.ownKeys(c);for(let t=0;t<p.length;t+=1){const e=p[t];s+=`<FieldRef Name="${e}" Type="${c[e]}"/>`,a[e]=0}u&&(n=/allItems/i.test(u)?' Scope="Recursive"':/^items$/i.test(u)?' Scope="FilesOnly"':/^all$/i.test(u)?' Scope="RecursiveAll"':""),h&&(o=`<Query><Where>${hr(h)}</Where></Query>`);const g=f.renderListData(`<View${n}>${o}<Aggregations>${s}</Aggregations></View>`);await me(d,t);const m=JSON.parse(g.get_value()).Row[0],y=Reflect.ownKeys(m);for(let t=0;t<y.length;t+=1){const e=y[t],r=e.split(".")[0];Reflect.hasOwnProperty.call(c,r)&&(a[r]=Number(m[e]))}return a})}async doesUserHavePermissions(t="manageWeb"){const{clientContexts:e,result:r}=await this.iterator(({clientContext:t,element:e})=>{const r=this.parent.getSPObject(t),i=this.getSPObject(e[Cr],r);return ge(t,i,{view:"EffectiveBasePermissions"})});return await Promise.all(e.map(t=>me(t))),dt(r)?r.map(e=>e.get_effectiveBasePermissions().has(SP.PermissionKind[t])):r.get_effectiveBasePermissions().has(SP.PermissionKind[t])}column(t){return Ee(this,t)}folder(t){return He(this,t)}item(t){return Sr(this,t)}getSPObject(t,e){return nt([this.getSPObjectCollection,w(b(gt(t)))([Q("getById")(t),Q("getByTitle")(t)])])(e)}getSPObjectCollection(t){return t.get_lists()}report(t,e={}){Ft(t,{...e,name:this.name,box:this.box,contextUrl:this.contextUrl})}of(t){return Y(this.constructor)(this.parent,t)}}class Or extends jr{constructor(t,e){super(t,e),this.name="library"}file(t){return Qe(this,t)}}var Tr=(t,e,r)=>Y("library"===r?Or:jr)(t,e);const kr=nt([Nt,Wt]),Br=S(p)({object:t=>{const e=Object.assign({},t);return!t.Url&&t.ServerRelativeUrl&&(e.Url=t.ServerRelativeUrl),"/"!==t.Url&&(e.Url=Qt(e.Url)),!t.ServerRelativeUrl&&t.Url&&(e.ServerRelativeUrl=t.Url),e},string:t=>{const e="/"===t?"/":Qt(Gt(t));return{Url:e,ServerRelativeUrl:e}},default:()=>({Url:"",ServerRelativeUrl:""})});class Ir extends se{constructor(t){super(t,Br,kr),this.joinProp="ServerRelativeUrl"}}var Er=Y(class{constructor(t,e){this.name="folder",this.parent=t,this.box=Y(Ir)(e),this.contextUrl=t.box.getHeadPropValue(),this.getContextSPObject=t.getSPObject.bind(t),this.iterator=oe({contextUrl:this.contextUrl,elementBox:this.box})}async get(t){const{contextUrl:e}=this,{clientContexts:r,result:i}=await this.iterator(({clientContext:r,element:i})=>{const n=this.getContextSPObject(r),s=ne(e)(i),o=Vt(s)?this.getSPObjectCollection(s,n):this.getSPObject(s,n);return ge(r,o,t)});return await Promise.all(r.map(e=>me(e,t))),de(i,t)}async create(t={}){let e,r;const{contextUrl:i}=this,n=["folderCreationRetries",this.parent.id];wt(Fe(n))||Le(u)(n);const{clientContexts:s,result:o}=await this.iterator(({clientContext:e,element:r})=>{const n=ne(i)(r);if(!re(n))return;const s=Yt(n),o=this.getSPObjectCollection(`${s}/`,this.getContextSPObject(e)).add(Jt(n));return ge(e,o,t)});if(this.box.getCount())for(let o=0;o<s.length;o+=1){const a=s[o];if(await me(a,{...t,silentErrors:!0}).catch(async t=>{const s=t.get_message();if(!/already exists/.test(s)){if(r=!0,"File Not Found."!==s)throw t;{const t={};await this.iterator(({element:e})=>{const r=ne(i)(e);t[Yt(r)]=!0}),await this.of(Object.keys(t)).create({silentInfo:!0,expanded:!0,view:["Name"]}).then(()=>{const t=Fe(n);return!!t&&(Le(t-1)(n),!0)}).catch(t=>!!/already exists/.test(t.get_message()))&&(e=!0)}}}),e)break}return e?this.create(t):r?void 0:(this.report("create",t),de(o,t))}async delete(t={}){const{noRecycle:e}=t,{contextUrl:r}=this,{clientContexts:i,result:n}=await this.iterator(({clientContext:t,element:i})=>{const n=ne(r)(i);if(!re(n))return;const s=this.getContextSPObject(t),o=this.getSPObject(n,s);return o.isRoot||K(e?"deleteObject":"recycle")(o),n});return this.box.getCount()&&await Promise.all(i.map(e=>me(e,t))),this.report(e?"delete":"recycle",t),de(n,t)}getSPObject(t,e){let r;if(t)r=e.getFolderByServerRelativeUrl(t);else{const t=e.get_rootFolder();t.isRoot=!0,r=t}return r}getSPObjectCollection(t,e){return t&&"/"!==t?this.getSPObject(Kt(t),e).get_folders():this.getSPObject(void 0,e).get_folders()}report(t,e={}){Ft(t,{...e,name:this.name,box:this.box,contextUrl:this.contextUrl})}of(t){return Y(this.constructor)(this.parent,t)}});const $r=nt([Nt,Wt]),Rr=S(p)({object:t=>{const e=Object.assign({},t);return"/"!==t.Url&&(e.Url=Qt(e.Url)),!t.Url&&t.ServerRelativeUrl&&(e.Url=t.ServerRelativeUrl),!t.ServerRelativeUrl&&t.Url&&(e.ServerRelativeUrl=t.Url),e},string:(t="")=>{const e="/"===t?"/":Qt(Gt(t));return{Url:e,ServerRelativeUrl:e}},default:()=>({Url:"",ServerRelativeUrl:""})});class Ar extends se{constructor(t){super(t,Rr,$r),this.joinProp="ServerRelativeUrl"}getCount(){return this.isArray?zt(this.value).length:Ht(this.value[this.prop])?1:0}}var Fr=Y(class{constructor(t,e){this.name="file",this.parent=t,this.box=Y(Ar)(e),this.contextUrl=t.box.getHeadPropValue(),this.getContextSPObject=t.getSPObject.bind(t),this.iterator=oe({contextUrl:this.contextUrl,elementBox:this.box}),this.iteratorREST=ae({elementBox:this.parent.box})}async get(t={}){if(t.asBlob){const{contextUrl:e}=this,r=await this.iteratorREST(({element:t})=>{const r=ne(e)(t);return be(e,{url:`${this.getRESTObject(r,e)}/$value`,binaryStringResponseBody:!0})});return fe(r,t)}const e=t.asItem?{...t,view:["ListItemAllFields"]}:{...t},{clientContexts:r,result:i}=await this.iterator(({clientContext:t,element:r})=>{const i=ne(this.contextUrl)(r),n=this.getContextSPObject(t),s=St(i)||Vt(i)?this.getSPObjectCollection(i,n):this.getSPObject(i,n);return ge(t,s,e)});return await Promise.all(r.map(t=>me(t,e))),de(i,e)}async create(t={}){let e,r;const i=["fileCreationRetries",this.parent.id];wt(Fe(i))||Le(u)(i);const{clientContexts:n,result:s}=await this.iterator(({clientContext:e,element:r})=>{const i=ne(this.contextUrl)(r);if(!Ht(i))return;const{Content:n="",Overwrite:s=!0}=r,o=t.asItem?{...t,view:["ListItemAllFields"]}:{...t},a=this.getSPObjectCollection(Yt(i),this.getContextSPObject(e)),l=new SP.FileCreationInformation;Pe({set_url:ee(i),set_content:_e(n),set_overwrite:s})(l);const c=a.add(l);return ge(e,c,o)});if(this.box.getCount())for(let i=0;i<n.length;i+=1){const s=n[i];if(await me(s,{...t,silentErrors:!0}).catch(async t=>{if(r=!0,"File Not Found."!==t.get_message())throw t;{const t={};await this.iterator(({element:e})=>{const r=ne(this.contextUrl)(e);t[te(r)]=!0}),await this.parent.folder(Object.keys(t)).create({silentInfo:!0,expanded:!0,view:["Name"]}).then(()=>{const t=["fileCreationRetries",this.parent.id],e=Fe(t);return!!e&&(Le(e-1)(t),!0)}).catch(t=>{/already exists/.test(t.get_message())&&(e=!0)})&&(e=!0)}}),e)break}return e?this.create(t):r?void 0:(this.report("create",t),de(s,t))}async update(t){const{clientContexts:e,result:r}=await this.iterator(({clientContext:t,element:e})=>{const{Content:r}=e,i=ne(this.contextUrl)(e);if(!Ht(i))return;const n=new SP.FileSaveBinaryInformation;void 0!==r&&n.set_content(_e(r));const s=this.getSPObject(i,this.getContextSPObject(t));return s.saveBinary(n),s});if(this.box.getCount())for(let r=0;r<e.length;r+=1){const i=e[r];await me(i,t)}return this.report("update",t),de(r,t)}async delete(t={}){const{noRecycle:e}=t,{clientContexts:r,result:i}=await this.iterator(({clientContext:t,element:r})=>{const i=ne(this.contextUrl)(r);if(!Ht(i))return;const n=this.getContextSPObject(t),s=this.getSPObject(i,n);return K(e?"deleteObject":"recycle")(s),i});return this.box.getCount()&&await Promise.all(r.map(e=>me(e,t))),this.report(e?"delete":"recycle",t),de(i,t)}async copy(t){const{contextUrl:e}=this,{clientContexts:r,result:i}=await this.iterator(({clientContext:t,element:r})=>{const i=ne(e)(r);if(!Ht(i))return;const n=this.getContextSPObject(t);return this.getSPObject(i,n).copyTo(ne(e)({Url:r.To,Folder:r.Folder})),i});return this.box.getCount()&&await Promise.all(r.map(e=>me(e,t))),this.report("copy",t),de(i,t)}async move(t){const{contextUrl:e}=this,{clientContexts:r,result:i}=await this.iterator(({clientContext:t,element:r})=>{const i=ne(e)(r);if(!Ht(i))return;const n=this.getContextSPObject(t);return this.getSPObject(i,n).moveTo(ne(e)({Url:r.To,Folder:r.Folder})),i});return this.box.getCount()&&await Promise.all(r.map(e=>me(e,t))),this.report("move",t),de(i,t)}getSPObject(t,e){const{contextUrl:r}=this,i=te(t),n=ee(t);return e.getFileByServerRelativeUrl(Gt(`/${i?`${r}/${i}`:r}/${n}`))}getSPObjectCollection(t,e){const{contextUrl:r}=this,i=te(t);return i?e.getFolderByServerRelativeUrl(`/${r}/${i}`).get_files():e.get_rootFolder().get_files()}getRESTObject(t,e){const r=ee(t),i=te(t);return Gt(`/_api/web/getfilebyserverrelativeurl('${qt(i?`${e}/${i}`:e)}/${r}')`)}report(t,e={}){Ft(t,{...e,name:this.name,box:this.box,contextUrl:this.contextUrl})}of(t){return Y(this.constructor)(this.parent,t)}});var Lr=Y(class{constructor(t){this.name="recycleBin",this.contextUrl=t.box.getHeadPropValue(),this.getSPObject=this.contextUrl?t.getSPObject:t.getSiteSPObject}async get(t){const e=ce(this.contextUrl),r=await ye(e,this.getSPObjectCollection(e),t);return de(r,t)}async restoreAll(t){const e=ce(this.contextUrl),r=this.getSPObjectCollection(e);r.restoreAll();const i=await ye(e,r,t);return this.report("restore",t),de(i,t)}async deleteAll(t){const e=ce(this.contextUrl),r=this.getSPObjectCollection(e);r.deleteAll();const i=await ye(e,r,t);return this.report("delete",t),de(i,t)}report(t,e={}){Rt(`${h[t]} ${this.name} at ${this.contextUrl}`,e)}getSPObjectCollection(t){return this.getSPObject(t).get_recycleBin()}});let Dr,Mr,Vr,Hr,Nr="Title",zr="Login",Wr="Email";var qr=Y(class{constructor(t,e){this.name="user",this.parent=t,this.isUsersArray=dt(e),this.users=e?this.isUsersArray?M(e):[e]:[],Dr||(Dr=t.of().list("User Information List"))}async get(t={}){if(this.users.length){const e=this.users[0];return ft(e)?Bt(Vr)(e)?this.getByUid(t):Bt(zr)(e)?this.getByName(t):Bt(Wr)(e)?this.getByEMail(t):"/"===e?this.getAll(t):Bt(zr)(e)?this.getByLogin(t):void 0:wt(e)?this.getByUid(t):/[а-яА-ЯЁё\s]/.test(e)?this.getByName(t):/\S+@\S+\.\S+/.test(e)?this.getByEMail(t):"/"===e?this.getAll(t):this.getByLogin(t)}return this.getCurrent(t)}async getCurrent(t={}){const{isSP:e}=t;if(e||!Mr){const e=ce("/"),r=e.get_web().get_currentUser();return de(await ye(e,r,t),t)}const r=window._spPageContextInfo?window._spPageContextInfo.userId:(await this.getCurrent({view:"Id",isSP:!0})).Id;return(await Mr.item(`Number ${Vr} Eq ${r}`).get(t))[0]}async getByUid(t={}){const{isSP:e}=t,r=e||!Mr&&!Vr,i=D(t=>e=>{switch(e.constructor.getName()){case"String":case"Number":t.push(e);break;case"Object":{const i=e[r?"ID":Vr];i&&t.push(i);break}case"SP.FieldUserValue":t.push(e.get_lookupId());break;case"SP.ListItem":{const i=e.get_item(r?"ID":Vr);i&&t.push(i);break}}return t})([])(this.users),n=r?Dr.item(i):Mr.item(`Number ${Vr} In ${i}`),s=await n.get(t);return this.isUsersArray||s.length>1?s:s[0]}async getByLogin(t={}){const{isSP:e}=t,r=e||!Mr&&!zr,i=D(t=>e=>{switch(e.constructor.getName()){case"String":t.push(e);break;case"Object":{const i=e[r?"UserName":zr];i&&t.push(i);break}case"SP.ListItem":{const i=e.get_item(r?"UserName":zr);i&&t.push(i);break}}return t})([])(this.users),n=r?Dr.item(`UserName In ${i}`):Mr.item(`${zr} In ${i}`),s=await n.get(t);return this.isUsersArray||s.length>1?s:s[0]}async getByName(t={}){const{isSP:e}=t,r=e||!Mr&&!Nr,i=D(t=>e=>{switch(e.constructor.getName()){case"String":t.push(e);break;case"Object":{const i=e[r?"Title":Nr];i&&t.push(i);break}case"SP.ListItem":{const i=e.get_item(r?"Title":Nr);i&&t.push(i);break}}return t})([])(this.users);return r?Dr.item(`Title Contains ${i}`).get(t):Mr.item(`${Nr} Contains ${i}`).get(t)}async getByEMail(t={}){const{isSP:e}=t,r=e||!Mr&&!Wr,i=D(t=>e=>{switch(e.constructor.getName()){case"String":t.push(e);break;case"Object":{const i=e[r?"EMail":Wr];i&&t.push(i);break}case"SP.ListItem":{const i=e.get_item(r?"EMail":Wr);i&&t.push(i);break}}return t})([])(this.users),n=r?Dr.item(`EMail In ${i}`):Mr.item(`${Wr} In ${i}`),s=await n.get(t);return this.isUsersArray||s.length>1?s:s[0]}async getAll(t={}){return t.isSP||!Mr?Dr.item().get(t):Mr.item(Hr).get(t)}async create(t){if(!Mr)throw new Error("Custom user list is missed");if(this.users.filter(t=>t[Vr]&&t[Nr]).length)return Mr.item(this.users).create(t);throw new Error("missing user id or Title")}async update(t={}){const{isSP:e}=t;if(e){const e=this.users.reduce((t,e)=>{if(e[Vr]){const{[Vr]:r,...i}=e;i.ID=r,t.push(i)}return t},[]),r=await Dr.item(e).update(t);return this.isUsersArray||r.length>1?r:r[0]}if(!Mr)throw new Error("Custom user list is missed");const r=this.users.filter(t=>!!t[Vr]);if(r.length){const e=await this.of(r).get({view:["ID",Vr],mapBy:Vr}),i=this.users.reduce((t,r)=>{const i=e[r[Vr]]?e[r[Vr]].ID:void 0;if(i){const{[Vr]:e,...n}=r;n.ID=i,t.push(n)}return t},[]),n=await Mr.item(i).update({...t,view:["ID",Vr]});return this.isUsersArray||n.length>1?n:n[0]}throw new Error("missing user id")}setDefaults(t={}){t.customWebTitle&&t.customListTitle&&(Mr=this.parent.of(t.customWebTitle).list(t.customListTitle)),t.defaultListTitle&&(Dr=this.parent.of().list(t.defaultListTitle)),t.customIdColumn&&(Vr=t.customIdColumn),t.customLoginColumn&&(zr=t.customLoginColumn),t.customNameColumn&&(Nr=t.customNameColumn),t.customEmailColumn&&(Wr=t.customEmailColumn),t.customQuery&&(Hr=t.customQuery)}of(t){return Y(this.constructor)(this.parent,t)}});const Kr="Label",Qr=t=>SP.Taxonomy.TaxonomySession.getTaxonomySession(t).getDefaultKeywordsTermStore(),Gr=t=>Qr(t).get_keywordsTermSet(),Xr=(t,e)=>(t=>Gr(t).getAllTerms())(t).getByName(e),Jr=nt([W(Kr),q(Kr)]),Zr=S(p)({object:t=>{const e=Object.assign({},t);return"/"!==t[Kr]&&(e[Kr]=Qt(e[Kr])),e},string:t=>{return{[Kr]:"/"!==t&&t?t:void 0}},default:()=>({[Kr]:void 0})});class Yr extends se{constructor(t){super(t,Zr,Jr),this.joinProp=Kr,this.prop=Kr}}var ti=Y(class{constructor(t,e){this.name="tag",this.parent=t,this.tags=e,this.box=Y(Yr)(e),this.count=this.box.getCount(),this.iterator=oe({elementBox:this.box})}async get(t={}){const{isExact:e=!0}=t,{clientContexts:r,result:i}=await this.iterator(({clientContext:r,element:i})=>{const n=Pe({set_defaultLabelOnly:i.DefaultLabelOnly||!1,set_resultCollectionSize:i.ResultCollectionSize||i.Limit||1e5,set_stringMatchOption:SP.Taxonomy.StringMatchOption[e?"exactMatch":"startsWith"],set_termLabel:i[Kr],set_trimDepricated:i.TrimDepricated||!0,set_trimUnavailable:i.TrimUnavailable||!0})(SP.Taxonomy.LabelMatchInformation.newObject(r)),s=SP.Taxonomy.TaxonomySession.getTaxonomySession(r).getDefaultKeywordsTermStore().get_keywordsTermSet().getTerms(n);return ge(r,s,t)});return await Promise.all(r.map(e=>me(e,t))),de(e&&1===i.length?i[0]:i,t)}async search(t){return this.get({...t,isExact:!1})}async create(t){const{clientContexts:e,result:r}=await this.iterator(({clientContext:e,element:r})=>{const i=r[Kr];if(!i)return;const n=Gr(e).createTerm(i,1033,tt(SP.Guid.newGuid).toString());return ge(e,n,t)});return this.count&&await Promise.all(e.map(e=>me(e,t))),this.report("create",t),de(r,t)}async update(t){const{clientContexts:e,result:r}=await this.iterator(({clientContext:e,element:r})=>{const i=r[Kr];if(!i)return;const n=Xr(e,i);return Pe({set_isAvailableForTagging:r.IsAvailableForTagging,set_name:r.Name,set_owner:r.Owner})(n),ge(e,n,t)});return this.count&&await Promise.all(e.map(e=>me(e,t))),this.report("update",t),de(r,t)}async delete(t){const{clientContexts:e,result:r}=await this.iterator(({clientContext:t,element:e})=>{const r=e[Kr];if(!r)return;const i=Qr(t),n=Xr(t,r);return K("deleteObject")(n),K("commitAll")(i),r});return this.count&&await Promise.all(e.map(e=>me(e,t))),this.report("delete",t),de(r,t)}report(t,e={}){At(t,{...e,name:this.name,box:this.box})}});const ei=/\S+@\S+\.\S+/,ri="To",ii=S(p)({object:y,default:()=>({[ri]:""})});class ni extends se{constructor(t=""){super(t,ii),this.joinProp=ri,this.prop=ri}getCount(){return this.isArray?this.value.length:1}}var si=Y(class{constructor(t,e){this.name="mail",this.parent=t,this.box=Y(ni)(e),this.count=this.box.getCount(),this.user=t.user}async send(t={}){const{isFake:e,detailed:r}=t,i=await this.box.chain(async i=>{const{From:n,To:o,Subject:a,Body:l}=i,c=E(o);if(!c.length)throw new Error("Recievers are missed");if(!a)throw new Error("Subject is missed");if(!l)throw new Error("Body is missed");const u=[],h=[];$(t=>(ei.test(t)?u:h).push(t))(c);const d=u;let f=n;if(n||(f=(await this.user().get({isSP:!0,view:"Email"})).Email),e)return;const p=await s()({url:"/_api/SP.Utilities.Utility.SendEmail",headers:{Accept:"application/json;odata=verbose","content-type":"application/json;odata=verbose"},method:"POST",data:JSON.stringify({properties:{__metadata:{type:"SP.Utilities.EmailProperties"},From:f,To:{results:d},Subject:a,Body:l}})});return r&&Rt(`Mail is sent\nSender: ${f}\nRecievers: ${d.join(", ")}`,t),p});return Rt(`${h.send} ${this.count} ${this.name}(s)`,t),i}of(t){return Y(this.constructor)(t)}});var oi=Y(class{constructor(t){this.name="time",this.parent=t}async get(){return new Promise((t,e)=>new SP.RequestExecutor("/").executeAsync({url:"/_api/web/RegionalSettings/TimeZone",success(e){t(new Date(e.headers.DATE))},error:e}))}async getZone(t){const e=ce("/"),r=e.get_web().get_regionalSettings().get_timeZone(),i=await ye(e,r,t);return de(i,t)}});const ai=nt([Nt,Wt]),li=S(p)({object:t=>{const e=Object.assign({},t);return!t.Url&&t.Title&&(e.Url=t.Title),"/"!==t.Url&&(e.Url=Qt(e.Url)),!t.Title&&t.Url&&(e.Title=Jt(t.Url)),e},string:(t="")=>({Url:"/"===t?"/":Qt(Gt(t)),Title:Jt(t)}),default:()=>({Url:"",Title:""})});e.default=Y(class{constructor(t){this.name="web",this.box=Y(se)(t,li,ai),this.id=Object(i.MD5)((new Date).getTime()).toString()}async get(t){const e=await this.box.chain(async e=>{const r=e.Url,i=ce(r),n=Vt(r)?this.getSPObjectCollection(i):this.getSPObject(i);return ye(i,n,t)});return de(e,t)}async create(t){const e=await this.box.chain(async e=>{const r=Yt(e.Url);if(!re(r))return;const i=ce(r),n=nt([tt,Pe({set_title:e.Title||void 0,set_description:e.Description,set_language:1033,set_url:e.Title||void 0,set_useSamePermissionsAsParentSite:!0,set_webTemplate:e.WebTemplate}),G("add")(this.getSPObjectCollection(i)),x(Pe({set_alternateCssUrl:e.AlternateCssUrl,set_associatedMemberGroup:e.AssociatedMemberGroup,set_associatedOwnerGroup:e.AssociatedOwnerGroup,set_associatedVisitorGroup:e.AssociatedVisitorGroup,set_customMasterUrl:e.CustomMasterUrl,set_enableMinimalDownload:e.EnableMinimalDownload,set_masterUrl:e.MasterUrl,set_objectVersion:e.ObjectVersion,set_quickLaunchEnabled:e.QuickLaunchEnabled,set_saveSiteAsTemplateEnabled:e.SaveSiteAsTemplateEnabled,set_serverRelativeUrl:e.ServerRelativeUrl,set_siteLogoUrl:e.SiteLogoUrl,set_syndicationEnabled:e.SyndicationEnabled,set_treeViewEnabled:e.TreeViewEnabled,set_uiVersion:e.UiVersion,set_uiVersionConfigurationEnabled:e.UiVersionConfigurationEnabled})),x(K("update"))])(SP.WebCreationInformation);return ye(i,n,t)});return this.report("create",t),de(e,t)}async update(t){const e=await this.box.chain(async e=>{const r=e.Url;if(!re(r))return;const i=ce(r),n=nt([Pe({set_title:e.Title||void 0,set_description:e.Description,set_alternateCssUrl:e.AlternateCssUrl,set_associatedMemberGroup:e.AssociatedMemberGroup,set_associatedOwnerGroup:e.AssociatedOwnerGroup,set_associatedVisitorGroup:e.AssociatedVisitorGroup,set_customMasterUrl:e.CustomMasterUrl,set_enableMinimalDownload:e.EnableMinimalDownload,set_masterUrl:e.MasterUrl,set_objectVersion:e.ObjectVersion,set_quickLaunchEnabled:e.QuickLaunchEnabled,set_saveSiteAsTemplateEnabled:e.SaveSiteAsTemplateEnabled,set_serverRelativeUrl:e.ServerRelativeUrl,set_siteLogoUrl:e.SiteLogoUrl,set_syndicationEnabled:e.SyndicationEnabled,set_treeViewEnabled:e.TreeViewEnabled,set_uiVersion:e.UiVersion,set_uiVersionConfigurationEnabled:e.UiVersionConfigurationEnabled}),x(K("update"))])(this.getSPObject(i));return ye(i,n,t)});return this.report("update",t),de(e,t)}async delete(t){const e=await this.box.chain(async e=>{const r=e.Url;if(!re(r))return;const i=ce(r),n=this.getSPObject(i);try{n.deleteObject()}catch(t){return new Error("Context url is wrong")}return await me(i,t),r});return this.report("delete",t),de(e,t)}async doesUserHavePermissions(t="fullMask"){return await this.box.chain(async e=>{const r=ce(e.Url),i=tt(SP.BasePermissions);i.set(SP.PermissionKind[t]);const n=this.getSPObject(r).doesUserHavePermissions(i);return await me(r),n.get_value()})}async getSite(t){const e=ce("/"),r=this.getSiteSPObject(e),i=await ye(e,r,t);return de(i,t)}async getCustomListTemplates(t){const e=ce("/"),r=this.getSiteSPObject(e).getCustomListTemplates(e.get_web()),i=await ye(e,r,t);return de(i,t)}async getWebTemplates(t){const e=ce("/"),r=this.getSiteSPObject(e).getWebTemplates(1033,0),i=await ye(e,r,t);return de(i,t)}recycleBin(){return Lr(this)}list(t){return Tr(this,t,"list")}library(t){return Tr(this,t,"library")}folder(t){return Er(this,t)}file(t){return Fr(this,t)}tag(t){return ti(this,t)}user(t){return qr(this,t)}mail(t){return si(this,t)}time(){return oi(this)}getSPObject(t){return t.get_web()}getSiteSPObject(t){return t.get_site()}getSPObjectCollection(t){return this.getSPObject(t).get_webs()}report(t,e={}){At(t,{...e,name:this.name,box:this.box})}of(t){return Y(this.constructor)(t)}})}])});
//# sourceMappingURL=index.js.map